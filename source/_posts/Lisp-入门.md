---
title: Lisp å…¥é—¨
date: 2019-03-01 14:19:22
tags:
---

### Lisp è¯­æ³•

#### è¡¨è¾¾å¼

å…ˆå†™ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå†å†™å€¼ã€‚

```lisp
(+ 1 2) // ç»“æœä¸º 3
(+ 1 2 3 4) // ç»“æœä¸º 10
(+ (* 3 3) (* 4 4)) // ç»“æœä¸º 25
```

#### è¾ƒé•¿çš„è¡¨è¾¾å¼

```lisp
(+ (* 3 (+ (* 2 4) (+ 3 5))) (+ (- 10 7) 6))

// å¯è¯»æ€§æ¨èåŠ ä¸Šç©ºæ ¼ä»¥åŠæ¢è¡Œ
(+ (* 3)
 			(+ (* 2 4))
   				(+ 3 5)))
		(+ (- 10 7)
      6))
```

#### å‘½åï¼ˆä¹Ÿå«å®šä¹‰ï¼Œä¸å«èµ‹å€¼ï¼‰

å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯ define ç„¶å æ¥å˜é‡åï¼Œç„¶åå†æ¥å˜é‡çš„å€¼

```lisp
(define size 5)
(* size 2) // ç»“æœä¸º 10
```

#### å¤åˆè¿‡ç¨‹ï¼ˆå‡½æ•°å®šä¹‰ï¼‰

```lisp
(define (fn a b) (+ a b))
(fn 1 2) // ç»“æœä¸º 3
(define (fn2 x) (* x x))
(fn2 4) // ç»“æœä¸º 16
```

### Lisp æ±‚å€¼

#### é€’å½’æ±‚å€¼

Lisp æ±‚å€¼å¯ä»¥ç†è§£ä¸ºé€’å½’æ±‚å€¼ï¼ŒLisp è¡¨è¾¾å¼æ±‚å€¼å°±æ˜¯æŠŠæ“ä½œæ³•å³ä¾§çš„ä½œç”¨äºæ“ä½œç¬¦æ¥è®¡ç®—æ±‚å€¼ï¼Œå¦‚æœè¿˜æœ‰æ“ä½œç¬¦ï¼Œå†æŠŠå€¼ä½œç”¨äºæ“ä½œç¬¦ï¼Œå¦‚æœè¿˜æœ‰æ“ä½œç¬¦ï¼Œä»¥æ­¤ç±»æ¨ã€‚

```lisp
(+
 (*2
  (+ 7 8))
 (+3
  (- 10 6))
)
```

ä¸Šé¢è¡¨è¾¾å¼çš„æ±‚å€¼ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªè¡¨è¾¾å¼ï¼šè¡¨è¾¾å¼ä¸€ `(*2 (+ 7 8))` å’Œè¡¨è¾¾å¼äºŒ `(+3 (-10 6))` ä»¥åŠæ“ä½œç¬¦ `+`ï¼›è¡¨è¾¾å¼ä¸€å†æ‹†åˆ†ä¸ºè¡¨è¾¾å¼ A `2` å’Œè¡¨è¾¾å¼ B `(+7 8)` ä»¥åŠæ“ä½œç¬¦ `*`ï¼›åŒç†è¡¨è¾¾å¼äºŒå†æ‹†åˆ†ä¸ºè¡¨ç¤º C `3` å’Œè¡¨è¾¾å¼ D `(-10 6)` ä»¥åŠæ“ä½œç¬¦ `+`ã€‚

æ­¤æ—¶å¯ä»¥è®¡ç®— è¡¨è¾¾å¼ B å€¼ä¸º `15`ï¼Œè¡¨è¾¾å¼ A å€¼ä¸º 2ï¼Œä½œç”¨äºæ“ä½œç¬¦ `*`ï¼Œ`2*15` å€¼ä¸º `30`ï¼Œæ‰€ä»¥å¾—åˆ°è¡¨è¾¾å¼ä¸€çš„å€¼ä¸º `30`ã€‚

åŒç†å¯ä»¥è®¡ç®—è¡¨è¾¾å¼ D å€¼ä¸º `4`ï¼Œè¡¨è¾¾å¼ C å€¼ä¸º `3`ï¼Œä½œç”¨äºæ“ä½œç¬¦ `+`ï¼Œ`3+4` å€¼ä¸º `7`ï¼Œæ‰€ä»¥å¾—åˆ°çš„è¡¨è¾¾å¼äºŒçš„å€¼ä¸º `7`ã€‚

è¡¨è¾¾å¼ä¸€çš„å€¼ä¸º `30`ï¼Œè¡¨è¾¾å¼äºŒçš„å€¼ä¸º `7`ï¼Œä½œç”¨äºæ“ä½œç¬¦ `+`ï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœä¸º `37`

#### ä»£å…¥æ±‚å€¼

é€’å½’æ±‚å€¼æ˜¯å¯¹å…·ä½“çš„å€¼çš„æ±‚å€¼ï¼Œä»£å…¥æ±‚å€¼æ˜¯å¯¹å®šä¹‰çš„å‡½æ•°çš„æ±‚å€¼ã€‚

å®šä¹‰ä¸‰ä¸ªå‡½æ•°ï¼š

```lisp
(define (sq x) (* x x))
(define (sqsum a b) (+ (sq a) (sq b)))
(define (f z) (sqsum z (+ z 1)))
```

æ±‚ (f 5)

```lisp
(f 5) = (sqsum 5 (+ 5 1))
			= (sqsum 5 6)
			= (+ (sq 5) (sq 6))
			= (+ (* 5 5) (* 6 6))
			= (+ 25 36)
			= 61
```

ä»»ä½•ä¸€ä¸ªå‡½æ•°çš„å€¼ï¼Œä¸€ç›´ä»£å…¥å‡½æ•°ï¼Œç›´åˆ°æ²¡æœ‰å‡½æ•°äº†ï¼Œå†é€’å½’æ±‚å‡ºæ¥ã€‚

### if 

å†™ä¸€ä¸ªæ±‚ç»å¯¹å€¼çš„å‡½æ•°

```lisp
(define (abs a)
  (if (> a 0)
      a
      (-a)))
```

### é€’å½’

æ±‚ä¸€ä¸ªæ­£æ•´æ•°çš„é˜¶ä¹˜ f(n) = n!ï¼Œä¸å®Œå…¨å½’çº³æ³•å¾—åˆ° f(n) = f(n -1)*n ï¼ˆn > 1ï¼‰ã€‚

```js
(define (f n)
 (if (= n 1)
			1
			(* n * (f (- n 1))))
)
```

ğŸ˜‚ æŸè‘—åç¨‹åºæ˜¯ Lisp å†™çš„ï¼Œå®ƒçš„æœ€åä¸€é¡µè¢«é—´è°ç›—å–äº†ï¼Œç»“æœå…¨éƒ¨æ˜¯åæ‹¬å·ã€‚

æ±‚ (f 6)

```lisp
(f 6) = (* 6 (f 5))
			= (* 6 (* 5 (f 4)))
			= (* 6 (* 5 (* 4 (f 3))))
			= (* 6 (* 5 (* 4 (* 3 (f 2)))))
			= (* 6 (* 5 (* 4 (* 3 (* 2 (f 1))))))
			= (* 6 (* 5 (* 4 (* 3 (* 2 (* 1))))))
			= (* 6 (* 5 (* 4 (* 3 (* 2 1)))))
			= (* 6 (* 5 (* 4 (* 3 2))))
			= (* 6 (* 5 (* 4 6)))
			= (* 6 (* 5 24))
			= (* 6 120)
			= 720
```

æ•´ä¸ªæ±‚å€¼è¿‡ç¨‹å°±æ˜¯å…ˆé€’è¿›ï¼ˆå±•å¼€ï¼‰ç„¶åå†å›å½’ï¼ˆæ±‚å€¼ï¼‰ï¼Œè¿™å°±æ˜¯é€’å½’ä¹‹æ‰€ä»¥å«é€’å½’ã€‚

### è¿­ä»£

è¿­ä»£æ±‚ 6 çš„é˜¶ä¹˜ã€‚å…ˆæ±‚ 1 çš„é˜¶ä¹˜ï¼Œ1 çš„é˜¶ä¹˜ ä¹˜ä»¥ 2 å¾—åˆ° 2 çš„é˜¶ä¹˜ å†ä¹˜ä»¥ 3 å¾—åˆ° 3 çš„é˜¶ä¹˜ å†ä¹˜ä»¥ 4 å¾—åˆ° 4 çš„é˜¶ä¹˜ å†ä¹˜ä»¥ 5 å¾—åˆ° 5 çš„é˜¶ä¹˜ å†ä¹˜ä»¥ 6 å¾—åˆ° 6 çš„é˜¶ä¹˜ã€‚

```lisp
(f 6) = (j 1 1 6) // (j result n max-n) result è¡¨ç¤ºè¿™æ¬¡çš„è®¡ç®—ç»“æœï¼Œn æ˜¯ç¬¬å‡ æ¬¡è®¡ç®—ï¼Œmax-n æ˜¯æœ€å¤šè®¡ç®—çš„æ¬¡æ•°
			= (j 2 2 6)
			= (j 6 3 6)
			= (j 24 4 6)
			= (j 120 5 6)
			= (j 720 6 6)
			= (j  7 6) // åˆ°ç¬¬ 7 æ¬¡ï¼Œ7 å¤§äº 6 æ‰€ä»¥ç›´æ¥è¿”å›ç»“æœä¸å†è®¡ç®—
```

æ¯æ¬¡ n + 1 è¿›è¡Œè®¡ç®—ï¼Œn > max-n æ—¶ç›´æ¥è¿”å›ç»“æœä¸å†è®¡ç®—ã€‚

```js
(define (factorial n)
	fact-iter 1 1 n)
(define (fact-iter result n max-n)
	(if (> n max-n)
		result 
		(fact-iter (* n result)
								(+ n 1)
								max-n )))
```

ä»ä¸€ä¸ªçŠ¶æ€åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆæ¯ä¸ªçŠ¶æ€æ˜¯ç”¨å›ºå®šæ•°ç›®çš„å˜é‡è¡¨ç¤ºçš„ï¼‰

### é«˜é˜¶å‡½æ•°

å‡è®¾æœ‰ä¸‰ä¸ªå‡½æ•°ï¼š

```lisp
(define (sum-int a b)
	(if (< a b)
		0
		(+ a (sum-int (+ a 1) b))))
(define (sum-cube a b)
	(if (< a b)
		0
		(+ (cube a) (sum-cube (+ a 1) b))))
(define (sum-square a b)
	(if (< a b)
		0
		(+ square a) (sum-square (+ a 1) b))))
```

ç„¶åæŠ½è±¡è¿™ä¸‰ä¸ªå‡½æ•°ï¼š

```lisp
(define (???1??? a b)
  (if (> a b)
      0
      (+ (???2??? a)
         (???1??? (???3??? a) b))))
```

å¥—å…¥å˜é‡

```lisp
(define (sum fn a next b)
  (if (> a b)
      0
      (+ (fn a)
         (sum fn (next a) next b))))
```

é‡å†™ä¸‰ä¸ªå‡½æ•°

```lisp
(define (plus n) (+n 1))
(define (sum-cube a b)
  (sum cube a plus b))

(define (nothing n) n)
(define (sum-int a b)
  (sum nothing a plus b))

(define (sum-square a b)
  (sum square a plus b))
```

é«˜é˜¶å‡½æ•°æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°æ“ä½œäº†å…¶ä»–å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯é«˜é˜¶å‡½æ•°ã€‚