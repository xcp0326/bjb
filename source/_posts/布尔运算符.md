---
title: 布尔运算符
category:
date: 2018-11-22 11:01:08
---

> <sup>这里是我读[《阮一峰 JavaScript 教程》](https://wangdoc.com/javascript/)做的笔记。</sup>

布尔运算符将表达式转为布尔值，一共包括四个运算符。

- 取反运算符 `!`
- 与运算符 `&&`
- 或运算符 `||`
- 三元运算符 `?:`

## 取反运算符 !

以下 6 个值取反后为 true，其他都是 false

- undefined
- null
- ''
- false
- NaN
- 0

```js
!{} // false
![] // false
!'hhh' // false
!null // true
!0 // true
```

对一个值连续做两次取反运算，等于将其转为对应的布尔值，与 Boolean 函数的作用相同。两次取反就是将一个值转为布尔值的简便写法。

```js
!!x // 即 Boolean(x)
```

## 与运算符 &&

与运算符往往用于多个表达式求值

- 如果第一个运算子的布尔值为 true，则返回第二个运算子的值
- 如果第一个运算子的布尔值为 false，则返回第一个运算子的值，且不再对第二个运算子求值

```js
't' && '' // ''
't' && 'a' // 'a'
't' && (1 + 2) // 3
'' && 'f' // ''
'' && (1 + 2) // ''

var x = 1
(1 - 1) && (x += 1) // 0
x // 1
```

这种跳过第二个运算子的机制，叫做“短路” short-cut。也可以用 if 结构来实现

```js
if (i) {
  doSomething()
}

// 可以用与运算简写为
i && doSomething()
```

但是简写的代码看不出目的，也不容易除错，所以建议谨慎使用

与运算符可以多个连用，这时候返回第一个布尔值为 false 的表达式的值。如果所有表达式的值都为 true，那么返回最后一个表达式的值。

```js
true && 'foo' && 0 && true // 0
1 && true && 9 // 9
```

## 或运算符 ||

或运算符也是用于多个表达式求值

- 如果第一个运算子的布尔值是 true，则返回第一个运算子的值，且不再对第二个运算子求值
- 如果第一个运算子的布尔值是 false，则返回第二个运算子的值

```js
't' || '' // 't'
'' || (1 + 2) // 3

var x = 1
true || (x = 2) // true
x // 1
```

也是“短路”机制

也可以多个连用，返回第一个布尔值为 true 的表达式，如果所有表达式都是 false，则返回最后一个表达式的值。

```js
false || 0 || '' || 4 || 'foo' || true // 4
false || 0 || '' // ''
```

或运算符常用于给一个变量设置默认值

```js
function saveText(text) {
  text = text || ''
  // xxx
}
saveText(this.text || '')
```

## 三元条件运算符 ?:

三元条件运算符是由问好和冒号组成，分隔三个表达式。它是 JavaScript 语言的唯一一个需要三个运算子的运算符。如果第一个表达式的布尔值为 true，则返回第二个表达式的值，否则返回第三个表达式的值。

```js
't' ? 'hello' : 'world' // 'hello'
'' ? 'hello' : 'world' // 'world'
```

三元条件表达式与 if ... else 语句具有相同的表达效果，前者可以表达的，后者也能表达。但是两者具有一个重大差别，if ... else 是语句，没有返回值；三元条件表达式是表达式，具有返回值。所以在需要返回的值的场合，只能使用三元条件表达式，而不能用 if ... else。

