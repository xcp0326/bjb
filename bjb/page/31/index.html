<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>FE NOTEBOOK 🚀</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/style/gitalk.css">
  <link rel="stylesheet" href="/style/style.css">
  <script src="/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">首页</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">归档</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE NOTEBOOK 🚀</h1>
  <h1 class="mobile"><a href="/">FE NOTEBOOK 🚀</a></h1>
  <em>「 学海无涯，没空撩妹！」</em>
</header>
    <main class="main">
      
  <article class="post">
  <div class="post-title">
    <h2 class="title">一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2019-01-07 11:51:20</span>
    <span class="post-tags">
      
    </span>
    
      <div class="article-category">分类：
        <a class="article-category-link" href="/categories/面试题/">面试题</a>
      </div>
    
  </div>
  <div class="post-content">
    <p><img src="/images/url-view/tcp.png" alt></p>
<p>第一步：根据域名进行 DNS 解析到 IP 地址</p>
<p>第二步：根据 IP 地址向服务器发起 TCP 连接，与浏览器进行三次握手：</p>
<ul>
<li>主机向服务器发送一个建立连接的请求</li>
<li>服务器接到请求后发送同意连接的信号</li>
<li>主机到同意连接的信号后，再次向服务器发送了确认信号</li>
</ul>
<p>第三步：发送 HTTP 请求，请求报文包括三部分：请求行、请求头和请求正文</p>
<p>第四步：服务器处理请求并返回 HTTP 响应报文，响应报文包括三部分：响应状态码、响应报头和响应报文。</p>
<p>如果该资源浏览器访问过，而且该资源的 response header 的 cache-control 有效时间内，就不再访问服务器，而是直接从本地读取，如果没有 cache-control 而有 expires，而且本地时间在 expires 时间之前，也不再访问服务器，也是直接从本地读取。expires 和 cache-control，cache-control 优先级更高，所以先访问 cache-control，它俩是 HTTP 强缓存。</p>
<p>如果 HTTP 强缓存都已经失效，则访问协商缓存，浏览器会携带缓存标识 Etag 和 Last-Modified 发送请求，如果 If-None-Match 值与浏览器携带的 Etag 值一致则返回 304，不用再请求服务器资源，缓存有效。如果失效，则看 Last-Modified-Sine 与浏览器携带的 Last-Modified 是否一致，如果一致，则返回 304 不再请求服务器资源。</p>
<p>第五步：解析并渲染页面</p>
<ul>
<li>HTML 开始构建一个 DOM 树</li>
<li>如果遇到的 DOM 节点是 JavaScript 代码，就会调用 JavaScript 引擎对 JavaScript 代码进行解释执行，此时由 JavaScript 引擎和 GUI 渲染线程的互斥，GUI 渲染线程就会被挂起，渲染过程停止；如果 JavaScript 代码的运行中对 DOM 树进行了修改，那么 DOM 的构建需要从新开始</li>
<li>如果节点需要依赖其他资源，如（图片，CSS等），便会调用网络模块的资源加载器来加载它们，但它们是异步的，不会阻塞当前DOM树的构建</li>
<li>如果遇到的是 JavaScript 资源 URL（没有标记异步），则需要停止当前 DOM 的构建，直到 JavaScript 的资源加载并被 JavaScript 引擎执行后才能继续构建 DOM</li>
<li>对于 CSS，CSS 解释器会将 CSS 文件解释成内部表示结构，生成 CSS 规则树；</li>
<li>然后合并 CSS 规则树和 DOM 树，生成渲染树</li>
<li>最后对渲染树树进行布局和绘制</li>
</ul>
<p>第六步：通过四次挥手关闭 TCP：</p>
<ul>
<li>主机向服务器发送一个断开的请求</li>
<li>服务器接到请求后发送确认收到请求的信号</li>
<li>服务器向主机发送断开通知</li>
<li>主机接到断开通知后断开连接并反馈一个确认信号，服务器收到取人信号后断开连接。</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><a href="http://fex.baidu.com/blog/2014/05/what-happen/" target="_blank" rel="noopener">从输入 URL 到页面加载完成的过程中都发生了什么事情？</a><br><a href="https://blog.fundebug.com/2019/02/28/what-happens-from-url-to-webpage/" target="_blank" rel="noopener">经典面试题：从 URL 输入到页面展现到底发生什么？
</a></p>

  </div>
  
</article>


  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/page/30/">&laquo;上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="page-number" href="/page/30/">30</a><span class="page-number current">31</span><a class="page-number" href="/page/32/">32</a><a class="page-number" href="/page/33/">33</a><span class="space">&hellip;</span><a class="page-number" href="/page/112/">112</a><a class="extend next" rel="next" href="/page/32/">下一页&raquo;</a>
  </nav>

    </main>
    <footer>
  <p>&copy; 2019 code.dsphoebe.com <wbr> <a href="http://www.miitbeian.gov.cn/">京ICP备15048606号-1</a></p>
</footer>
  </body>
</html>
