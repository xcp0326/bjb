<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>FE NOTEBOOK 🚀</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/style/gitalk.css">
  <link rel="stylesheet" href="/style/style.css">
  <script src="/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">首页</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">归档</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE NOTEBOOK 🚀</h1>
  <h1 class="mobile"><a href="/">FE NOTEBOOK 🚀</a></h1>
  <em>「 学海无涯，没空撩妹！」</em>
</header>
    <main class="main">
      
  <article class="post">
  <div class="post-title">
    <h2 class="title">算术运算符</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2018-11-21 22:51:37</span>
    <span class="post-tags">
      
    </span>
    
  </div>
  <div class="post-content">
    <blockquote>
<p><sup>这里是我读<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">《阮一峰 JavaScript 教程》</a>做的笔记。</sup></p>
</blockquote>
<p>JavaScript 提供了 10 个算术运算符，用来完成基本的算术元素。</p>
<ol>
<li>加法运算符 <code>x + y</code></li>
<li>减法运算符 <code>x - y</code></li>
<li>乘法运算符 <code>x * y</code></li>
<li>除法运算符 <code>x / y</code></li>
<li>指数运算符 <code>x ** y</code></li>
<li>余数运算符 <code>x % y</code></li>
<li>自增运算符 <code>++x</code> 或者 <code>x++</code></li>
<li>自减运算符 <code>--x</code> 或者 <code>x--</code></li>
<li>数值运算符 <code>+x</code></li>
<li>负数值运算符 <code>-x</code></li>
</ol>
<h2 id="加法运算符"><a href="#加法运算符" class="headerlink" title="加法运算符"></a>加法运算符</h2><p>JavaScript 允许非数值的相加。</p>
<h3 id="基本规则"><a href="#基本规则" class="headerlink" title="基本规则"></a>基本规则</h3><p>加法运算符是在运算时决定到底是执行相加还是执行连接。也就是说运算子的不同，导致了不同的语法行为，这种现象称为“重载”（overload）。</p>
<ul>
<li><p>数值相加 ：直接相加</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">1</span> <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>布尔值相加 ：转换为对应的布尔值数值然后相加</p>
<ul>
<li><p>两个布尔值相加</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">true</span> + <span class="literal">true</span> <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个布尔值加一个数值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">true</span> + <span class="number">1</span> <span class="comment">// 2</span></span><br><span class="line"><span class="number">1</span> + <span class="literal">false</span> <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>字符串相加</p>
<ul>
<li><p>两个字符串相加 ：字符串相连</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'1'</span> + <span class="string">'1'</span> <span class="comment">// '11'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个字符串和非字符串 ：非字符串转为字符串然后相连</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'1'</span> + <span class="literal">true</span> <span class="comment">// '1true'</span></span><br><span class="line"><span class="literal">true</span> + <span class="string">'1'</span> <span class="comment">// 'true1'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个字符串加多个数字 ：数值会被转为字符串然后相连</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'1'</span> + <span class="number">1</span> + <span class="number">1</span> <span class="comment">// '111'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>多个数字加一个字符串 ：数值相加然后连接字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">1</span> + <span class="string">'1'</span> <span class="comment">// '21'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="对象相加"><a href="#对象相加" class="headerlink" title="对象相加"></a>对象相加</h3><p>如果运算子是对象，必须先转称原始类型的值，然后在相加。</p>
<p>对象转成原始类型的步骤：</p>
<ol>
<li>调用 valueOf 方法</li>
<li>如果第 1 步的值不是原始类型，就再调用 toString 方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">p</span>: <span class="number">1</span>&#125;</span><br><span class="line">obj.valueOf().toString() <span class="comment">// "[object Obect]"</span></span><br><span class="line"></span><br><span class="line">obj + <span class="number">1</span> <span class="comment">// "[object Object]1"</span></span><br></pre></td></tr></table></figure>
<p>按照这个规则，我们可以自定义 valueOf 和 toString 方法来得到想要的结果。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj + <span class="number">2</span> <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>按照对象转原始类型的规则，上面 <code>obj.valueOf()</code> 返回原始类型 1，所以就是 <code>1 + 2</code> 的返回值就是 3</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj + <span class="number">2</span> <span class="comment">// 'hello2'</span></span><br></pre></td></tr></table></figure>
<p>按照对象转原始类型的规则，上面 <code>obj.valueOf()</code> 是 <code>{p: 1}</code>，所以就执行 toString 方法，调用了我们自定义的 toString 方法，返回 hello，最后的值为 hello2</p>
<p>有一个特例，如果运算子是 Date 对象的实例，那么会优先执行 toString 方法。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">obj.valueOf = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">obj.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="string">'hello'</span>&#125;</span><br><span class="line">obj + <span class="number">2</span> <span class="comment">// 'hello2'</span></span><br></pre></td></tr></table></figure>
<h2 id="余数运算符"><a href="#余数运算符" class="headerlink" title="余数运算符"></a>余数运算符</h2><p>余数运算符 <code>%</code> 返回前一个运算子被后一个运算子除，所得的余数。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">12</span> % <span class="number">5</span> <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>运算的结果的正负由第一个运算子的正负号决定。真是诡异 😨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">-1</span> % <span class="number">2</span> <span class="comment">// -1</span></span><br><span class="line"><span class="number">1</span> % <span class="number">-2</span> <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>所以为了的到负数的正确余数值，可以先使用绝对值函数。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOdd</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(n % <span class="number">2</span>) === <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">isOdd(<span class="number">-5</span>) <span class="comment">// true</span></span><br><span class="line">isOdd(<span class="number">-4</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>余数可以用于浮点数的运算，只是浮点数不是精确数值，不能得到准确的数值。可以先移动小数点的位置到最后，等计算完再将小数点的位置挪回来。</p>
<h2 id="自增和自减运算符"><a href="#自增和自减运算符" class="headerlink" title="自增和自减运算符"></a>自增和自减运算符</h2><p>自增和自减运算符，是一元运算符，只需要一个运算子。他们的作用是将运算子首先转为数值，然后再加上 1 或者减去 1。会修改原始变量。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line">++x <span class="comment">// 2</span></span><br><span class="line">x <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">--x <span class="comment">// 1</span></span><br><span class="line">x <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>运算之后，变量的值发生变化，这种效应叫做副作用（side effect）。自增和自减运算符是仅有的两个具有副作用的运算符，其他运算符都不会改变变量的值。</p>
<p>自增和自减运算符有一个需要注意的地方，就是放在变量之后，会先返回变量操作前的值，再进行自增/自减操作；放在变量之前，会先进行自增/自减操作，再返回变量操作后的值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">1</span></span><br><span class="line">x++ <span class="comment">// 1</span></span><br><span class="line">++y <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h2 id="数值运算符、负数值运算符"><a href="#数值运算符、负数值运算符" class="headerlink" title="数值运算符、负数值运算符"></a>数值运算符、负数值运算符</h2><p>数值运算符同样适用加号，但他是一元运算符（只需要一个操作数），而加法运算符是二元运算符（需要两个操作数）。</p>
<p>数值运算符的作用是可以将任何值转为数值（与 Number 函数的作用相同）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">+<span class="literal">true</span> <span class="comment">// 1</span></span><br><span class="line">+[] <span class="comment">// 0</span></span><br><span class="line">+&#123;&#125; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<p>负数值运算符是减号，也同样具有将一个值转为数值的功能，只不过得到的值正负相反。连用两个负数值运算符，等同于数值运算符。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">-<span class="string">'1'</span> <span class="comment">// -1</span></span><br><span class="line">-<span class="literal">true</span> <span class="comment">// -1</span></span><br><span class="line">-[] <span class="comment">// -0</span></span><br><span class="line">-&#123;&#125; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<h2 id="指数运算符"><a href="#指数运算符" class="headerlink" title="指数运算符"></a>指数运算符</h2><p>指数运算符 <code>**</code> 完成指数运算，前一个运算子是底数，后一个运算子是指数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span> ** <span class="number">3</span> <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>
<p>指数运算符是右结合，而不是左结合。即多个指数运算符连用时，先进行最右边的计算。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span> ** <span class="number">3</span> ** <span class="number">2</span> <span class="comment">// 相当于 2 ** (3 ** 2) 结果为 512</span></span><br></pre></td></tr></table></figure>
<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><p>复合的赋值运算符，都是先进行指定的运算，然后再将得到的值赋给左边的变量。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line">x += <span class="number">2</span> <span class="comment">// x = x + 2 所以结果是 3</span></span><br></pre></td></tr></table></figure>

  </div>
  
</article>


  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/page/74/">&laquo;上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/73/">73</a><a class="page-number" href="/page/74/">74</a><span class="page-number current">75</span><a class="page-number" href="/page/76/">76</a><a class="page-number" href="/page/77/">77</a><span class="space">&hellip;</span><a class="page-number" href="/page/112/">112</a><a class="extend next" rel="next" href="/page/76/">下一页&raquo;</a>
  </nav>

    </main>
    <footer>
  <p>&copy; 2019 code.dsphoebe.com <wbr> <a href="http://www.miitbeian.gov.cn/">京ICP备15048606号-1</a></p>
</footer>
  </body>
</html>
