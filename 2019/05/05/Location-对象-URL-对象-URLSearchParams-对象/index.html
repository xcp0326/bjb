<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>Location å¯¹è±¡ URL å¯¹è±¡ URLSearchParams å¯¹è±¡ | FE ç¬”è®°æœ¬ ğŸš€</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/bjb/style/gitalk.css">
  <link rel="stylesheet" href="/bjb/style/style.css">
  <script src="/bjb/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/bjb/" class="menu-item-link">é¦–é¡µ</a>
        </li>
      
        <li class="menu-item">
          <a href="/bjb/archives" class="menu-item-link">å½’æ¡£</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE ç¬”è®°æœ¬ ğŸš€</h1>
  <h1 class="mobile"><a href="/">FE ç¬”è®°æœ¬ ğŸš€</a></h1>
  <em>ã€Œ å­¦æµ·æ— æ¶¯ï¼Œæ²¡ç©ºæ’©å¦¹ï¼ã€</em>
</header>
    <main class="main">
      <article class="post">
  <div class="post-title">
    <h2 class="title">Location å¯¹è±¡ URL å¯¹è±¡ URLSearchParams å¯¹è±¡</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2019-05-05 16:02:54</span>
    <span class="post-tags">
      
    </span>
    
  </div>
  <div class="post-content">
    <blockquote>
<p><sup>è¿™é‡Œæ˜¯æˆ‘è¯»<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">ã€Šé˜®ä¸€å³° JavaScript æ•™ç¨‹ã€‹</a>åšçš„ç¬”è®°ã€‚</sup></p>
</blockquote>
<p>window.location å’Œ document.location éƒ½å¯ä»¥æ‹¿åˆ° Location å¯¹è±¡ã€‚</p>
<ul>
<li>location.hrefï¼š<code>http://user:passwd@www.example.com:4097/path/a.html?x=111#part1</code></li>
<li>location.protocol</li>
<li>location.hostï¼šä¸»æœºï¼ŒåŒ…æ‹¬å†’å·å’Œç«¯å£å·ã€‚ä¾‹å¦‚ï¼š<code>www.example.com:4097</code></li>
<li>location.hostnameï¼šä¸»æœºåï¼Œä¸åŒ…æ‹¬å†’å·å’Œç«¯å£å·ã€‚ä¾‹å¦‚ï¼š<code>www.example.com</code></li>
<li>location.search</li>
<li>location.hash</li>
<li>location.username</li>
<li>location.password</li>
<li><p>location.origin åªè¯»ã€‚URL çš„åè®®ã€ä¸»æœºåå’Œç«¯å£å·ã€‚ä¾‹å¦‚ï¼š<code>http://user:passwd@www.example.com:4097</code></p>
</li>
<li><p>location.assign() vs location.hrefï¼šè·³è½¬åˆ°å‚æ•°æ‰€åœ¨çš„ URL</p>
</li>
<li>location.replace(<code>&lt;URL&gt;</code>) vs history.replaceState(state, title, url)</li>
<li>location.reload()</li>
</ul>
<h3 id="URL-çš„ç¼–ç å’Œè§£ç "><a href="#URL-çš„ç¼–ç å’Œè§£ç " class="headerlink" title="URL çš„ç¼–ç å’Œè§£ç "></a>URL çš„ç¼–ç å’Œè§£ç </h3><blockquote>
<p>URL vs URIï¼š<br>URL æ˜¯ URI çš„ä¸€ä¸ªå®ç°ã€‚<br>URI æ˜¯ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ŒURL æ˜¯ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ŒURN ç»Ÿä¸€èµ„æºåç§°ã€‚<br>URI åŒ…å« URN å’Œ URLã€‚</p>
</blockquote>
<ul>
<li>URL å…ƒå­—ç¬¦ï¼šåˆ†å·ï¼Œé€—å·ï¼Œæ–œæ†ï¼Œé—®å·ï¼Œå†’å·ï¼Œatï¼Œ<code>&amp;</code>ï¼Œç­‰å·ï¼ŒåŠ å·ï¼Œç¾å…ƒç¬¦å·ï¼Œäº•å·</li>
<li>è¯­ä¹‰å­—ç¬¦ï¼ša-zã€A-Zã€0-9ã€è¿è¯å­—ã€ä¸‹åˆ’çº¿ã€ç‚¹ã€æ„Ÿå¹å·ã€æ³¢æµªçº¿ã€æ˜Ÿå·ã€å•å¼•å·ã€åœ†æ‹¬å·</li>
</ul>
<p>å…¶ä»–éƒ½å¿…é¡»è½¬ç§»ï¼Œè§„åˆ™æ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿçš„é»˜è®¤ç¼–ç ï¼Œå°†æ¯ä¸ªå­—èŠ‚è½¬ä¸ºç™¾åˆ†å·åŠ ä¸Šå¯¹åº”çš„åå…­è¿›åˆ¶ï¼Œå¦‚æœåå…­è¿›åˆ¶åŒ…å«å­—æ¯ï¼Œå­—æ¯å¤§å†™ã€‚</p>
<blockquote>
<p>æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„ç¼–ç çš„å‘½ä»¤æ˜¯ locale</p>
<p><img src="/images/system-locale.png" alt></p>
</blockquote>
<ul>
<li>encodeURI(<code>URL</code>)  / decodeURL(<code>URL</code>) ï¼šè½¬ä¹‰ / è§£ç å…ƒå­—ç¬¦å’Œè¯­ä¹‰å­—ç¬¦ä¹‹å¤–çš„å­—ç¬¦</li>
<li>encodeURLComponent(<code>URL|URL çš„ç»„æˆéƒ¨åˆ†</code>) / decodeURLComponent(<code>URL|URL çš„ç»„æˆéƒ¨åˆ†</code>)ï¼šè½¬ä¹‰ / è§£ç è¯­ä¹‰å­—ç¬¦ä¹‹å¤–çš„å­—ç¬¦</li>
</ul>
<h3 id="URL-å¯¹è±¡"><a href="#URL-å¯¹è±¡" class="headerlink" title="URL å¯¹è±¡"></a>URL å¯¹è±¡</h3><p>URL å¯¹è±¡æ˜¯æµè§ˆå™¨çš„åŸç”Ÿå¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥æ„é€ ã€è§£æå’Œç¼–ç  URLã€‚é€šè¿‡ window.URL å¯ä»¥æ‹¿åˆ°è¿™ä¸ªå¯¹è±¡ã€‚</p>
<p><code>&lt;a&gt;</code> å’Œ <code>&lt;area&gt;</code> ä¸Šæœ‰è¿™ä¸ªæ¥å£ã€‚å®ƒä»¬çš„ DOM èŠ‚ç‚¹å¯¹è±¡å¯ä»¥ä½¿ç”¨ URL çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚</p>
<blockquote>
<p>DOM èŠ‚ç‚¹ vs Elementï¼šElement åªæ˜¯èŠ‚ç‚¹ä¸­çš„ä¸€ç§ç±»å‹ï¼ŒDOM èŠ‚ç‚¹é™¤äº† Elementï¼ˆå…ƒç´ èŠ‚ç‚¹ï¼‰ï¼Œè¿˜æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ³¨é‡ŠèŠ‚ç‚¹ï¼Œæ–‡æ¡£èŠ‚ç‚¹ç­‰ç­‰ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">a.href = <span class="string">'http://example.com/?foo=1'</span>;</span><br><span class="line"></span><br><span class="line">a.hostname <span class="comment">// "example.com"</span></span><br><span class="line">a.search <span class="comment">// "?foo=1"</span></span><br></pre></td></tr></table></figure>
<h3 id="URL-å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°"><a href="#URL-å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°" class="headerlink" title="URL å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°"></a>URL å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="keyword">new</span> URL(urlString, [baseURLString])</span><br><span class="line"><span class="keyword">const</span> url = <span class="keyword">new</span> URL(urlString, baseURLobject)</span><br></pre></td></tr></table></figure>
<p>urlString ä¸º <code>..</code>ï¼Œåˆ™è¡¨ç¤ºä¸Šå±‚è·¯å¾„ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> url3 = <span class="keyword">new</span> URL(<span class="string">'..'</span>, <span class="string">'http://example.com/a/b.html'</span>)</span><br><span class="line">url3.href</span><br><span class="line"><span class="comment">// "http://example.com/"</span></span><br></pre></td></tr></table></figure>
<h3 id="URL-çš„é™æ€æ–¹æ³•"><a href="#URL-çš„é™æ€æ–¹æ³•" class="headerlink" title="URL çš„é™æ€æ–¹æ³•"></a>URL çš„é™æ€æ–¹æ³•</h3><ul>
<li><strong>URL.createObjectURL()</strong> ç”¨æ¥ä¸ºä¸Šä¼ /ä¸‹è½½çš„æ–‡ä»¶ã€æµåª’ä½“æ–‡ä»¶ç”Ÿæˆä¸€ä¸ª URL å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä»£è¡¨äº† File å¯¹è±¡æˆ– Blob å¯¹è±¡çš„ URLã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// HTML ä»£ç å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">// &lt;div id="display"/&gt;</span></span><br><span class="line"><span class="comment">// &lt;input</span></span><br><span class="line"><span class="comment">//   type="file"</span></span><br><span class="line"><span class="comment">//   id="fileElem"</span></span><br><span class="line"><span class="comment">//   multiple</span></span><br><span class="line"><span class="comment">//   accept="image/*"</span></span><br><span class="line"><span class="comment">//   onchange="handleFiles(this.files)"</span></span><br><span class="line"><span class="comment">//  &gt;</span></span><br><span class="line"><span class="keyword">const</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'display'</span>)</span><br><span class="line"><span class="keyword">const</span> handleFiles = <span class="function"><span class="params">files</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">    img.src = <span class="built_in">window</span>.URL.createObjectURL(files[i])</span><br><span class="line">    div.appendChild(img)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•ç”Ÿæˆçš„ URL å°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">blob:http:<span class="comment">//localhost/c745ef73-ece9-46da-8f66-ebes574789b1</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæ¯æ¬¡ä½¿ç”¨ URL.createObjectURL éƒ½ä¼šåœ¨å†…å­˜ä¸­ç”Ÿå­˜ä¸€ä¸ª URL å®ä¾‹ã€‚å¦‚æœä¸å†éœ€è¦æ”¹æ–¹æ³•ç”Ÿæˆçš„ URL å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ URL.revokeObjectURL æ–¹æ³•é‡Šæ”¾æ‰æ‰€å çš„å†…å­˜ã€‚</p>
<ul>
<li><strong>URL.revokeObjectURL</strong> </li>
</ul>
<p>æ‰€ä»¥ä¸Šé¢ handleFiles å¯ä»¥ä¼˜åŒ–ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> handleFiles = <span class="function"><span class="params">files</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">    img.src = <span class="built_in">window</span>.URL.createObjectURL(files[i])</span><br><span class="line">    div.appendChild(img)</span><br><span class="line">    img.onload = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.URL.revokeObjectURL(<span class="keyword">this</span>.src)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="URLSearchParam-å¯¹è±¡"><a href="#URLSearchParam-å¯¹è±¡" class="headerlink" title="URLSearchParam å¯¹è±¡"></a>URLSearchParam å¯¹è±¡</h3><p>æµè§ˆå™¨åŸç”Ÿå¯¹è±¡ï¼Œç”¨æ¥æ„é€ ã€è§£æã€å¤„ç† URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</p>
<p>å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯å‚è®­å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ•°ç»„æˆ–å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€ï¼šä¼ å…¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> params = <span class="keyword">new</span> URLSearchParams(<span class="string">'?foo=1&amp;bar=2'</span>);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">var</span> params = <span class="keyword">new</span> URLSearchParams(<span class="built_in">document</span>.location.search);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒï¼šä¼ å…¥æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> params = <span class="keyword">new</span> URLSearchParams([[<span class="string">'foo'</span>, <span class="number">1</span>], [<span class="string">'bar'</span>, <span class="number">2</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸‰ï¼šä¼ å…¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> params = <span class="keyword">new</span> URLSearchParams(&#123;<span class="string">'foo'</span> : <span class="number">1</span> , <span class="string">'bar'</span> : <span class="number">2</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¡¨å•æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>URLSearchParams</code>å®ä¾‹ä½œä¸ºè¡¨å•æ•°æ®ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> URLSearchParams(&#123;<span class="attr">foo</span>: <span class="number">1</span>, <span class="attr">bar</span>: <span class="number">2</span>&#125;);</span><br><span class="line">fetch(<span class="string">'https://example.com/api'</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  body: params</span><br><span class="line">&#125;).then(...)</span><br></pre></td></tr></table></figure>
<p>URL å®ä¾‹çš„<code>searchParams</code>å±æ€§å°±æ˜¯ä¸€ä¸ª<code>URLSearchParams</code>å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨<code>URLSearchParams</code>æ¥å£çš„<code>get</code>æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="keyword">new</span> URL(<span class="built_in">window</span>.location);</span><br><span class="line"><span class="keyword">var</span> foo = url.searchParams.get(<span class="string">'foo'</span>) || <span class="string">'somedefault'</span>;</span><br></pre></td></tr></table></figure>
<p>DOM çš„<code>a</code>å…ƒç´ èŠ‚ç‚¹çš„<code>searchParams</code>å±æ€§ï¼Œå°±æ˜¯ä¸€ä¸ª<code>URLSearchParams</code>å®ä¾‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">a.href = <span class="string">'https://example.com?filter=api'</span>;</span><br><span class="line">a.searchParams.get(<span class="string">'filter'</span>) <span class="comment">// "api"</span></span><br></pre></td></tr></table></figure>
<p><code>URLSearchParams</code>å®ä¾‹æœ‰éå†å™¨æ¥å£ï¼Œå¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†</p>
<ul>
<li>URLSearchParams.toString()ï¼šè¿”å›å®ä¾‹çš„å­—ç¬¦ä¸²å½¢å¼</li>
<li>URLSearchParams.append(key, value)ï¼šè¿½åŠ æŸ¥è¯¢å‚æ•°ã€‚ä¸è¿‡ä¸ä¼šè¯†åˆ«æ˜¯å¦æœ‰åŒåæŸ¥è¯¢å‚æ•°</li>
<li>URLSearchParams.delete(key)ï¼šåˆ é™¤é”®åä¸º key çš„æŸ¥è¯¢å‚æ•°</li>
<li>URLSearchParams.has(key)</li>
<li>URLSearchParams.set(key, value)ï¼šè®¾ç½® key çš„æŸ¥è¯¢å‚æ•°çš„å€¼ä¸º value</li>
<li>URLSearchParams.get(â€˜keyâ€™)</li>
<li>URLSearchParams.getAll(â€˜keyâ€™)</li>
<li>URLSearchParams.sort()ï¼šå¯¹æŸ¥è¯¢å­—ç¬¦ä¸²çš„é”®æŒ‰ç…§ Unicode ç ç‚¹è¿›è¡Œæ’åº</li>
<li>URLSearchParams.keys()ã€URLSearchParams.values()ã€URLSearchParams.entries() è¿”å›éå†å™¨</li>
</ul>

  </div>
  
</article>
    </main>
    <footer>
  <p>&copy; 2019 xcp0326</p>
</footer>
  </body>
</html>
