<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>EventTarget æ¥å£ | FE NOTEBOOK ğŸš€</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/bjb/style/gitalk.css">
  <link rel="stylesheet" href="/bjb/style/style.css">
  <script src="/bjb/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/bjb/" class="menu-item-link">é¦–é¡µ</a>
        </li>
      
        <li class="menu-item">
          <a href="/bjb/archives" class="menu-item-link">å½’æ¡£</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE NOTEBOOK ğŸš€</h1>
  <h1 class="mobile"><a href="/">FE NOTEBOOK ğŸš€</a></h1>
  <em>ã€Œ å­¦æµ·æ— æ¶¯ï¼Œæ²¡ç©ºæ’©å¦¹ï¼ã€</em>
</header>
    <main class="main">
      <article class="post">
  <div class="post-title">
    <h2 class="title">EventTarget æ¥å£</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2019-02-03 11:28:29</span>
    <span class="post-tags">
      
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/bjb/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/bjb/tags/äº‹ä»¶/">äº‹ä»¶</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/bjb/tags/å‘å¸ƒè®¢é˜…/">å‘å¸ƒè®¢é˜…</a></li></ul>
      
    </span>
    
  </div>
  <div class="post-content">
    <blockquote>
<p><sup>è¿™é‡Œæ˜¯æˆ‘è¯»<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">ã€Šé˜®ä¸€å³° JavaScript æ•™ç¨‹ã€‹</a>åšçš„ç¬”è®°ã€‚</sup></p>
</blockquote>
<p>äº‹ä»¶æœ¬è´¨æ˜¯ç¨‹åºå„ä¸ªç»„æˆéƒ¨åˆ†ä¹‹é—´çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œä¹Ÿæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§å®ç°ã€‚</p>
<p>DOM çš„äº‹ä»¶æ“ä½œï¼ˆç›‘å¬å’Œè§¦å‘ï¼‰éƒ½å®šä¹‰åœ¨ EventTarget æ¥å£ã€‚æ‰€æœ‰èŠ‚ç‚¹å¯¹è±¡éƒ½éƒ¨ç½²äº†è¿™ä¸ªæ¥å£ æ¯”å¦‚ä¸€ä¸ª div èŠ‚ç‚¹å…ƒç´ ï¼š</p>
<p>HTMLDivElement ç»§æ‰¿è‡ª HTMLElement<br>  =&gt; HTMLElement ç»§æ‰¿è‡ª Element<br>    =&gt; Element ç»§æ‰¿è‡ª Node<br>      =&gt; Node ç»§æ‰¿è‡ª EventTarget<br>        =&gt; EventTarget ç»§æ‰¿è‡ª Object åŸå‹é“¾ç»ˆç‚¹</p>
<p>è¿˜æœ‰å…¶ä»–ä¸€äº›éœ€è¦äº‹ä»¶é€šä¿¡çš„æµè§ˆå™¨å†…ç½®å¯¹è±¡ æ¯”å¦‚ XMLHttpRequest ä¹Ÿéƒ¨ç½²äº†è¿™ä¸ªæ¥å£ï¼š</p>
<p>XMLHttpRequest ç»§æ‰¿è‡ª XMLHttpRequestEventTarget<br>  =&gt; XMLHttpRequest ç»§æ‰¿è‡ª EventTarget<br>    =&gt; EventTarget ç»§æ‰¿è‡ª Object åŸå‹é“¾ç»ˆç‚¹</p>
<p>EventTarget æ¥å£çš„ä¸‰ä¸ªå®ä¾‹æ–¹æ³•ï¼š</p>
<ul>
<li>addEventListener æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨</li>
<li>removeEventListener ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨</li>
<li>dispatchEvent ï¼ˆIE çš„ fireEventï¼ŒjQuery çš„ trigger() æ–¹æ³•ï¼‰è§¦å‘æŒ‡å®šäº‹ä»¶</li>
</ul>
<h3 id="addEventListener-æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨"><a href="#addEventListener-æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨" class="headerlink" title="addEventListener æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨"></a>addEventListener æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">target.addEventListener(eventType, listener[, useCapture])</span><br><span class="line">target.addEventListener(eventType, listener[, options])</span><br></pre></td></tr></table></figure>
<ul>
<li><p>useCaptureï¼štrue è¡¨ç¤ºæ•è·ï¼Œfalse è¡¨ç¤ºå†’æ³¡ï¼Œé»˜è®¤ä¸º false å†’æ³¡<br><img src="https://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.svg" alt="Graphical representation of an event dispatched in a DOM tree using the DOM event flow"></p>
</li>
<li><p>listenerï¼šæ˜¯æŒ‡å®ç°äº† EventListener æ¥å£çš„å¯¹è±¡æˆ–è€…è¯´ä¸€ä¸ªå‡½æ•°</p>
<ul>
<li><p>ä¸€ä¸ª EventListener æ¥å£å¯¹è±¡çš„ä¾‹å­ï¼šEventListener ä¸‹é¡»æœ‰ä¸”åªæœ‰ handleEvent() å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">buttonElement.addEventListener(<span class="string">'click'</span>, &#123;</span><br><span class="line">  handleEvent: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Element clicked through handleEvent property!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>optionsï¼šæ˜¯ä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡ï¼Œ<code>{capture: true, once: true, passive: true}</code>ã€‚capture æ˜¯å¦åœ¨æ•è·é˜¶æ®µè§¦å‘äº‹ä»¶ï¼›once è¡¨ç¤ºç›‘å¬äº‹ä»¶åªä¼šè§¦å‘ä¸€æ¬¡ï¼Œç„¶åè‡ªåŠ¨ç§»é™¤ï¼›passive è¡¨ç¤º listener ä¸ä¼šè°ƒç”¨äº‹ä»¶çš„ preventDefault æ–¹æ³•ï¼Œå¦‚æœ listener è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œå®¢æˆ·ç«¯å°†ä¼šå¿½ç•¥å®ƒå¹¶æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å°è­¦å‘Šã€‚</p>
</li>
</ul>
<h3 id="removeEventListener-ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨"><a href="#removeEventListener-ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨" class="headerlink" title="removeEventListener ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨"></a>removeEventListener ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨</h3><p>ç§»é™¤ addEventListener æ–¹æ³•æ·»åŠ çš„äº‹ä»¶ä¾¦å¬å™¨ï¼Œå‚æ•°å¿…é¡»ä¸ addEventListener å®Œå…¨ä¸€è‡´ï¼ŒèŠ‚ç‚¹ä¹Ÿå¿…é¡»æ˜¯åŒä¸€ä¸ªã€‚</p>
<h3 id="dispathEvent-è§¦å‘äº‹ä»¶"><a href="#dispathEvent-è§¦å‘äº‹ä»¶" class="headerlink" title="dispathEvent è§¦å‘äº‹ä»¶"></a>dispathEvent è§¦å‘äº‹ä»¶</h3><p>åœ¨èŠ‚ç‚¹ä¸Šè§¦å‘æŒ‡å®šäº‹ä»¶ï¼ˆäº‹ä»¶å¿…é¡»æ˜¯ Event å¯¹è±¡å®ä¾‹ï¼‰ï¼Œä»è€Œè§¦å‘ listener çš„æ‰§è¡Œã€‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœ listener è°ƒç”¨äº† event.preventDefault()ï¼Œè¿”å› falseï¼Œå¦åˆ™ trueã€‚</p>
<p>å¯ä»¥æ ¹æ®è¿”å›å€¼åˆ¤æ–­äº‹ä»¶æ˜¯å¦è¢«å–æ¶ˆäº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> canceled = !cb.dispatchEvent(event);</span><br><span class="line"><span class="keyword">if</span> (canceled) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'äº‹ä»¶å–æ¶ˆ'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'äº‹ä»¶æœªå–æ¶ˆ'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº‹ä»¶ä¾¦å¬å™¨-vs-äº‹ä»¶å¤„ç†å™¨"><a href="#äº‹ä»¶ä¾¦å¬å™¨-vs-äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="äº‹ä»¶ä¾¦å¬å™¨ vs äº‹ä»¶å¤„ç†å™¨"></a>äº‹ä»¶ä¾¦å¬å™¨ vs äº‹ä»¶å¤„ç†å™¨</h3><ul>
<li>äº‹ä»¶ä¾¦å¬å™¨æ˜¯é€šè¿‡ EventTarget.addEventListener æ³¨å†Œçš„å‡½æ•°ï¼Œä¸€ä¸ªäº‹ä»¶å¯ä»¥æ³¨å†Œå¤šä¸ªï¼Œåœ¨ eventloop æ—¶å€™ï¼Œä¼šå…ˆåæ‰§è¡Œã€‚</li>
<li>äº‹ä»¶å¤„ç†å™¨æ˜¯é€šè¿‡ onâ€¦ å±æ€§æ³¨å†Œçš„å‡½æ•°ï¼Œä¸€ä¸ªäº‹ä»¶åªèƒ½æ³¨å†Œä¸€ä¸ªï¼Œåæ³¨å†Œçš„ä¼šè¦†ç›–å…ˆæ³¨å†Œçš„å‡½æ•°ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">div.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="number">1</span>)&#125;, <span class="literal">false</span>)</span><br><span class="line">div.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="number">2</span>)&#125;, <span class="literal">false</span>)</span><br><span class="line">div.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="number">3</span>)&#125;</span><br><span class="line">div.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="number">4</span>)&#125;</span><br><span class="line"><span class="keyword">const</span> e = <span class="keyword">new</span> Event(<span class="string">'click'</span>)</span><br><span class="line">div.dispatchEvent(e) <span class="comment">// ä¾æ¬¡ alert 1ï¼Œ2ï¼Œ4</span></span><br></pre></td></tr></table></figure>

  </div>
  
</article>
    </main>
    <footer>
  <p>&copy; 2019 bjb.dsphoebe.com <wbr> <a href="http://www.miitbeian.gov.cn/">äº¬ICPå¤‡15048606å·-1</a></p>
</footer>
  </body>
</html>
