<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>FE ç¬”è®°æœ¬ ğŸš€</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/bjb/style/gitalk.css">
  <link rel="stylesheet" href="/bjb/style/style.css">
  <script src="/bjb/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/bjb/" class="menu-item-link">é¦–é¡µ</a>
        </li>
      
        <li class="menu-item">
          <a href="/bjb/archives" class="menu-item-link">å½’æ¡£</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE ç¬”è®°æœ¬ ğŸš€</h1>
  <h1 class="mobile"><a href="/">FE ç¬”è®°æœ¬ ğŸš€</a></h1>
  <em>ã€Œ å­¦æµ·æ— æ¶¯ï¼Œæ²¡ç©ºæ’©å¦¹ï¼ã€</em>
</header>
    <main class="main">
      
  <article class="post">
  <div class="post-title">
    <h2 class="title">IndexedDB</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2019-06-03 15:49:19</span>
    <span class="post-tags">
      
    </span>
    
  </div>
  <div class="post-content">
    <p>ç°æœ‰çš„æµè§ˆå™¨æ•°æ®å‚¨å­˜æ–¹æ¡ˆï¼ŒCookie 4kbï¼Œä¸”æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå‘é€å›æœåŠ¡å™¨ï¼›LocalStorage åœ¨ 2.5M åˆ° 10M ä¹‹é—´ï¼ˆå„æµè§ˆå™¨ä¸åŒï¼‰ï¼Œä¸èƒ½æœç´¢ä¸èƒ½å»ºç´¢å¼•ã€‚è¿™å°±æ˜¯ IndexDB å‡ºç°çš„åœºæ™¯ã€‚</p>
<p>IndexDB æ›´æ¥è¿‘ NoSQL æ•°æ®åº“</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>é”®å€¼å¯¹å‚¨å­˜ã€åŒæºç­–ç•¥ã€</p>
<p>å¼‚æ­¥ï¼šIndexDB æ“ä½œæ—¶ä¸ä¼šé”æ­»æµè§ˆå™¨ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè¿™ä¸ LocalStorage å½¢æˆå¯¹æ¯”ï¼Œåè€…çš„æ“ä½œæ˜¯åŒæ­¥çš„ ğŸ¤”ã€‚å¼‚æ­¥è®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢å¤§é‡æ•°æ®çš„è¯»å†™ï¼Œæ‹–æ…¢ç½‘é¡µçš„è¡¨ç°ã€‚</p>
<p>æ”¯æŒäº‹åŠ¡ï¼štransactionï¼Œè¿™æ„å‘³ç€ä¸€ç³»åˆ—æ“ä½œæ­¥éª¤ä¹‹ä¸­ï¼Œåªè¦æœ‰ä¸€æ­¥å¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å°±éƒ½å–æ¶ˆï¼Œæ•°æ®åº“å›æ»šåˆ°äº‹åŠ¡å‘ç”Ÿä¹‹å‰çš„çŠ¶æ€ï¼Œä¸å­˜åœ¨åªæ”¹å†™ä¸€éƒ¨åˆ†æ•°æ®çš„æƒ…å†µã€‚</p>
<p>å‚¨å­˜ç©ºé—´å¤§ï¼šä¸€èˆ¬ä¸å°‘äº 250Mï¼Œç”šè‡³æ²¡æœ‰è®¾ç½®ä¸Šé™</p>
<p>æ”¯æŒäºŒè¿›åˆ¶å‚¨å­˜ï¼šä¸ä»…å¯ä»¥å‚¨å­˜å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥å‚¨å­˜äºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBuffer å¯¹è±¡å’Œ Blob å¯¹è±¡ï¼‰</p>
<p>æ•°æ®åº“æ˜¯ä¸€ç³»åˆ—ç›¸å…³æ•°æ®çš„å®¹å™¨ã€‚æ¯ä¸ªåŸŸåéƒ½å¯ä»¥æ–°å»ºä»»æ„å¤šä¸ªæ•°æ®åº“ã€‚IndexDB æ•°æ®åº“æœ‰ç‰ˆæœ¬çš„æ¦‚å¿µã€‚åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®åº“å­˜åœ¨ã€‚å¦‚æœä¿®æ”¹æ•°æ®åº“ç»“æ„ï¼ˆæ–°å¢ã€ç´¢å¼•æˆ–ä¸»é”®ï¼‰ï¼Œåªèƒ½é€šè¿‡å‡çº§æ•°æ®åº“ç‰ˆæœ¬å®Œæˆã€‚</p>
<p>æ¯ä¸ªæ•°æ®åº“æœ‰è‹¥å¹²ä¸ªå¯¹è±¡ä»“åº“ï¼Œå®ƒç±»ä¼¼äºå…³ç³»æ•°æ®åº“çš„è¡¨æ ¼ã€‚</p>
<p>å¯¹è±¡ä»“åº“ä¿å­˜çš„æ˜¯æ•°æ®è®°å½•ã€‚æ¯æ¡è®°å½•ç±»ä¼¼äºå…³ç³»æ•°æ®åº“çš„è¡Œï¼Œä½†æ˜¯åªæœ‰ä¸»é”®å’Œæ•°æ®ä½“ä¸¤éƒ¨åˆ†ã€‚ä¸»é”®ç”¨æ¥å»ºç«‹é»˜è®¤çš„ç´¢å¼•ï¼Œå¿…é¡»æ˜¯ä¸åŒçš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ä¸»é”®å¯ä»¥æ˜¯æ•°æ®è®°å½•é‡Œé¢çš„ä¸€ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºä¸€ä¸ªé€’å¢çš„æ•´æ•°ç¼–å·ã€‚æ¯”å¦‚ id å°±å¯ä»¥ä½œä¸ºä¸»é”®ã€‚æ•°æ®ä½“å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼Œä¸é™äºå¯¹è±¡ã€‚</p>
<p>ä¸ºäº†åŠ é€Ÿæ•°æ®çš„æ£€ç´¢ï¼Œå¯ä»¥åœ¨å¯¹è±¡ä»“åº“é‡Œé¢ï¼Œä¸ºä¸åŒçš„å±æ€§å»ºç«‹ç´¢å¼•ã€‚</p>
<p>æ•°æ®è®°å½•çš„è¯»å†™å’Œåˆ æ”¹ï¼Œéƒ½è¦é€šè¿‡äº‹åŠ¡å®Œæˆã€‚äº‹åŠ¡å¯¹è±¡æä¾› errorã€abort å’Œ complete ä¸‰ä¸ªæ—¶é—´ï¼Œç”¨æ¥ç›‘å¬æ“ä½œç»“æœã€‚</p>
<h4 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">window</span>.indexedDB.open(databaseName, version);</span><br><span class="line"><span class="keyword">let</span> db;</span><br><span class="line">request.onerror = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ•°æ®åº“æ‰“å¼€å‘ç”Ÿé”™è¯¯'</span>);</span><br><span class="line">request.onsuccess = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  db = request.result;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æˆåŠŸæ‰“å¼€ä¸€ä¸ªæ•°æ®åº“'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœæŒ‡å®šçš„ version å¤§äºæ•°æ®åº“ç‰ˆæœ¬å·ï¼Œå°±ä¼šå‡çº§</span></span><br><span class="line">request.onupgradeneeded = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  db = event.target.result; <span class="comment">// æ‹¿åˆ°æ•°æ®åº“å®ä¾‹ï¼Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–°å»ºæ•°æ®åº“"><a href="#æ–°å»ºæ•°æ®åº“" class="headerlink" title="æ–°å»ºæ•°æ®åº“"></a>æ–°å»ºæ•°æ®åº“</h4><p>æ‰“å¼€æ•°æ®åº“æ—¶ï¼Œå¦‚æœæŒ‡å®šçš„æ•°æ®åº“ä¸å­˜åœ¨å°±ä¼šè‡ªåŠ¨æ–°å»ºå¹¶è§¦å‘ <code>upgradeneeded</code> å‡½æ•°ã€‚</p>
<p>æ–°å»ºå¯¹è±¡ä»“åº“ï¼Œè®¾ç½®ä¸»é”®ï¼Œæ–°å»ºç´¢å¼•ã€‚ä¸‹ä¸€å±‚å¯¹è±¡çš„å±æ€§å¯ä»¥æŒ‡å®šä¸ºä¸»é”®ã€‚å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼ˆautoIncrement: true)ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">request.onupgradeneeded = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  db = event.target.result;</span><br><span class="line">  <span class="keyword">const</span> objectStore = db.createObjectStore(<span class="string">'person'</span>, &#123;<span class="attr">keyPath</span>: <span class="string">'id'</span>&#125;);</span><br><span class="line">  objectStore.createIndex(<span class="string">'name'</span>, <span class="string">'name'</span>, &#123;<span class="attr">unique</span>: <span class="literal">false</span>&#125;); </span><br><span class="line">  objectStore.createIndex(<span class="string">'email'</span>, <span class="string">'email'</span>, &#123;<span class="attr">unique</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">  <span class="comment">// objectStore.createIndex(ç´¢å¼•åç§°ï¼Œç´¢å¼•æ‰€åœ¨çš„å±æ€§ï¼Œé…ç½®å¯¹è±¡)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–°å¢æ•°æ®"><a href="#æ–°å¢æ•°æ®" class="headerlink" title="æ–°å¢æ•°æ®"></a>æ–°å¢æ•°æ®</h4><p>é€šè¿‡äº‹åŠ¡æ¥å®Œæˆå‘å¯¹è±¡ä»“åº“å†™å…¥æ•°æ®è®°å½•æ¥æ–°å¢æ•°æ®ã€‚æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">  	.objectStore(<span class="string">'person'</span>)</span><br><span class="line">  	.add(&#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'xx'</span>, <span class="attr">age</span>: <span class="number">24</span>, <span class="attr">email</span>: <span class="string">'z@z.com'</span>&#125;);</span><br><span class="line">  </span><br><span class="line">  request.onsuccess = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ•°æ®å†™å…¥æˆåŠŸ'</span>);</span><br><span class="line">  </span><br><span class="line">  request.onerror = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ•°æ®å†™å…¥å¤±è´¥'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">add();</span><br></pre></td></tr></table></figure>
<h4 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> read = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> transaction = db.transaction([<span class="string">'person'</span>]);</span><br><span class="line">  <span class="keyword">const</span> objectStore = transaction.objectStore(<span class="string">'person'</span>);</span><br><span class="line">  <span class="keyword">const</span> request = objectStore.get(<span class="number">1</span>); <span class="comment">// 1 æ˜¯ä¸»é”®çš„å€¼.</span></span><br><span class="line">  </span><br><span class="line">  request.onerror = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'è¯»å–å¤±è´¥'</span>);</span><br><span class="line">  </span><br><span class="line">  request.onsuccess = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (request.result) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Name: '</span> + request.result.name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æœªè·å¾—æ•°æ®è®°å½•'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">read();</span><br></pre></td></tr></table></figure>
<h4 id="éå†æ•°æ®"><a href="#éå†æ•°æ®" class="headerlink" title="éå†æ•°æ®"></a>éå†æ•°æ®</h4><p>ä½¿ç”¨ IDBCursor æŒ‡é’ˆå¯¹è±¡ä¾¿åˆ©æ•°æ®å¯¹è±¡çš„æ‰€æœ‰è®°å½•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> readAll = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> objectStore = db.transaction(<span class="string">'person'</span>).objectStore(<span class="string">'person'</span>);</span><br><span class="line">  objectStore.openCursor().onsuccess = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line"> 		<span class="keyword">const</span> cursor = event.target.result;</span><br><span class="line">    <span class="keyword">if</span> (cursor) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Id: '</span> + cursor.key);</span><br><span class="line">      cursor.continue();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æ²¡æœ‰æ•°æ®äº†'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">readAll();</span><br></pre></td></tr></table></figure>
<p>openCursor() æ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥è¦ç›‘å¬ success äº‹ä»¶ã€‚</p>
<h4 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">  	.objectStore(<span class="string">'person'</span>)</span><br><span class="line">  	.put(&#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'zzz'</span>, <span class="attr">age</span>: <span class="number">12</span>, <span class="attr">email</span>: <span class="string">'1z@z.com'</span>&#125;);</span><br><span class="line">  request.onsuccess = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°æˆåŠŸ'</span>);</span><br><span class="line">  request.onerror = <span class="function">(<span class="params">event</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°å¤±è´¥'</span>);</span><br><span class="line">&#125;</span><br><span class="line">update();</span><br></pre></td></tr></table></figure>
<h4 id="åˆ é™¤å¯¹è±¡"><a href="#åˆ é™¤å¯¹è±¡" class="headerlink" title="åˆ é™¤å¯¹è±¡"></a>åˆ é™¤å¯¹è±¡</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> request = db.transaction([<span class="string">'person'</span>], <span class="string">'readwrite'</span>)</span><br><span class="line">    .objectStore(<span class="string">'person'</span>)</span><br><span class="line">    .delete(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ•°æ®åˆ é™¤æˆåŠŸ'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">remove();</span><br></pre></td></tr></table></figure>
<p>ç´¢å¼•æ˜¯è®©ä½ å¯ä»¥æœç´¢ä»»æ„å­—æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ä»ä»»æ„å­—æ®µæ‹¿åˆ°æ•°æ®è®°å½•ã€‚</p>
<p>å¯¹ name å­—æ®µå»ºç«‹ç´¢å¼• <code>objectStore.createIndex(&#39;name&#39;, &#39;name&#39;, {unique: false})</code> </p>
<p>ç„¶åå°±å¯ä»¥ç”¨ name æ¥æœç´¢å¯¹åº”çš„æ•°æ®è®°å½•äº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> transaction = db.transaction([<span class="string">'person'</span>], <span class="string">'readonly'</span>);</span><br><span class="line"><span class="keyword">const</span> store = transaction.objectStore(<span class="string">'person'</span>);</span><br><span class="line"><span class="keyword">const</span> index = store.index(<span class="string">'name'</span>);</span><br><span class="line"><span class="keyword">const</span> request = index.get(<span class="string">'æå››'</span>);</span><br><span class="line"></span><br><span class="line">request.onsuccess = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> result = event.target.result;</span><br><span class="line">  <span class="keyword">if</span> (result) &#123;</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="indexedDB-deleteDatabase"><a href="#indexedDB-deleteDatabase" class="headerlink" title="indexedDB.deleteDatabase()"></a>indexedDB.deleteDatabase()</h4><p>åˆ é™¤æ•°æ®åº“åï¼Œå½“å‰æ•°æ®åº“çš„å…¶ä»–å·²ç»æ‰“å¼€çš„é“¾æ¥éƒ½ä¼šæ¥æ”¶åˆ° versionchange äº‹ä»¶</p>
<h4 id="indexedDB-cmp"><a href="#indexedDB-cmp" class="headerlink" title="indexedDB.cmp()"></a>indexedDB.cmp()</h4><p>æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸º indexedDB çš„ç›¸åŒçš„ä¸»é”® ğŸ¤” æ²¡æ˜ç™½åœºæ™¯æ˜¯å•¥</p>
<h4 id="IDBRequest-å¯¹è±¡"><a href="#IDBRequest-å¯¹è±¡" class="headerlink" title="IDBRequest å¯¹è±¡"></a>IDBRequest å¯¹è±¡</h4><p>indexedDB.open() å’Œ indexedDB.deleteDatabase() ä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚æ•°æ®åº“çš„æ“ä½œéƒ½æ˜¯é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥å®Œæˆçš„ã€‚æ˜¯å¼‚æ­¥æ“ä½œã€‚é€šè¿‡ readyState ï¼ˆpending | doneï¼‰è¡¨ç¤ºçŠ¶æ€ã€‚</p>
<ul>
<li>IDBRequest.readyState</li>
<li>IDBRequest.result</li>
<li>IDBRequest.error</li>
<li>IDBRequest.source</li>
<li>IDBRequest.transaction</li>
<li>IDBRequest.onsuccess</li>
<li>IDBRequest.onerror</li>
<li>IDBOpenDBRequest.onblocked</li>
<li>IDBOpenDBRquest.onupgradeneeded</li>
</ul>
<h4 id="IDBDatabase-å¯¹è±¡"><a href="#IDBDatabase-å¯¹è±¡" class="headerlink" title="IDBDatabase å¯¹è±¡"></a>IDBDatabase å¯¹è±¡</h4><p>æ‰“å¼€æ•°æ®æˆåŠŸä»¥åï¼Œå¯ä»¥ä» IDBOpenDBRequest å¯¹è±¡çš„ result å±æ€§ä¸Šé¢ï¼Œæ‹¿åˆ°ä¸€ä¸ª IDBDatabase å¯¹è±¡ï¼Œ</p>
<p>â€¦ </p>
<h4 id="IDBObjectStore-å¯¹è±¡"><a href="#IDBObjectStore-å¯¹è±¡" class="headerlink" title="IDBObjectStore å¯¹è±¡"></a>IDBObjectStore å¯¹è±¡</h4><h4 id="IDBTransaction-å¯¹è±¡"><a href="#IDBTransaction-å¯¹è±¡" class="headerlink" title="IDBTransaction å¯¹è±¡"></a>IDBTransaction å¯¹è±¡</h4><p>ç”¨æ¥å¼‚æ­¥æ“ä½œæ•°æ®åº“äº‹åŠ¡ï¼Œæ‰€æœ‰æ•°æ®åº“çš„è¯»å†™æ“ä½œéƒ½è¦é€šè¿‡è¿™ä¸ªå¯¹è±¡è¿›è¡Œã€‚äº‹åŠ¡ tranaction è¿™ä¸ªè¯å…ˆå‰åœ¨ React router æºç è§è¿‡ã€‚äº‹åŠ¡â€¦ ğŸ¤”</p>
<h4 id="IDBIndex-å¯¹è±¡"><a href="#IDBIndex-å¯¹è±¡" class="headerlink" title="IDBIndex å¯¹è±¡"></a>IDBIndex å¯¹è±¡</h4><p>ä»£è¡¨æ•°æ®åº“çš„ç´¢å¼•ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡å¯ä»¥è·å–æ•°æ®åº“é‡Œé¢çš„è®°å½•ã€‚æ•°æ®è®°å½•çš„ä¸»é”®é»˜è®¤æ˜¯å¸¦æœ‰ç´¢å¼•ï¼ŒIDBIndex å¯¹è±¡ä¸»è¦ç”¨äºé€šè¿‡é™¤ä¸»é”®æ„å¤–çš„å…¶ä»–é”®ï¼Œå»ºç«‹ç´¢å¼•è·å–å¯¹è±¡ã€‚IDBIndex æ˜¯æŒä¹…æ€§ï¼ˆğŸ¤” æœ‰ä¸æŒä¹…çš„å­˜å‚¨ï¼‰çš„é”®å€¼å¯¹å­˜å‚¨ã€‚åªè¦æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®è®°å½•ï¼Œå¼•ç”¨çš„å¯¹è±¡åº“ä¸­çš„è®°å½•ï¼Œç´¢å¼•å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p>
<h4 id="IDBCursor-å¯¹è±¡"><a href="#IDBCursor-å¯¹è±¡" class="headerlink" title="IDBCursor å¯¹è±¡"></a>IDBCursor å¯¹è±¡</h4><p>ç”¨æ¥éå†æ•°æ®ä»“åº“ IDBObjectStore æˆ–ç´¢å¼• IDBIndex çš„è®°å½•ã€‚</p>
<h4 id="IDBKeyRange-å¯¹è±¡"><a href="#IDBKeyRange-å¯¹è±¡" class="headerlink" title="IDBKeyRange å¯¹è±¡"></a>IDBKeyRange å¯¹è±¡</h4><p>æœ‰ä¸€ä¸ªå®ä¾‹æ–¹æ³• includes(key)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªä¸»é”®æ˜¯å¦åŒ…å«åœ¨å½“å‰è¿™ä¸ªä¸»é”®ç»„ä¹‹å†…ã€‚ğŸ¤” è¿™å¤§æ¦‚æ˜¯å®ƒçš„åœºæ™¯å§ï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> keyRangeValue = IDBKeyRange.bound(<span class="string">'A'</span>, <span class="string">'K'</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">keyRangeValue.includes(<span class="string">'F'</span>)<span class="comment">// true</span></span><br><span class="line">keyRangeValue.includes(<span class="string">'W'</span>)<span class="comment">// false</span></span><br></pre></td></tr></table></figure>

  </div>
  
</article>


  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/bjb/page/3/">&laquo;ä¸Šä¸€é¡µ</a><a class="page-number" href="/bjb/">1</a><a class="page-number" href="/bjb/page/2/">2</a><a class="page-number" href="/bjb/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/bjb/page/5/">5</a><a class="page-number" href="/bjb/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/bjb/page/77/">77</a><a class="extend next" rel="next" href="/bjb/page/5/">ä¸‹ä¸€é¡µ&raquo;</a>
  </nav>

    </main>
    <footer>
  <p>&copy; 2019 xcp0326</p>
</footer>
  </body>
</html>
