<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>FE ç¬”è®°æœ¬ ğŸš€</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/bjb/style/gitalk.css">
  <link rel="stylesheet" href="/bjb/style/style.css">
  <script src="/bjb/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/bjb/" class="menu-item-link">é¦–é¡µ</a>
        </li>
      
        <li class="menu-item">
          <a href="/bjb/archives" class="menu-item-link">å½’æ¡£</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE ç¬”è®°æœ¬ ğŸš€</h1>
  <h1 class="mobile"><a href="/">FE ç¬”è®°æœ¬ ğŸš€</a></h1>
  <em>ã€Œ å­¦æµ·æ— æ¶¯ï¼Œæ²¡ç©ºæ’©å¦¹ï¼ã€</em>
</header>
    <main class="main">
      
  <article class="post">
  <div class="post-title">
    <h2 class="title">this å…³é”®å­—</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2019-03-04 12:44:24</span>
    <span class="post-tags">
      
    </span>
    
  </div>
  <div class="post-content">
    <blockquote>
<p><sup>è¿™é‡Œæ˜¯æˆ‘è¯»<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">ã€Šé˜®ä¸€å³° JavaScript æ•™ç¨‹ã€‹</a>åšçš„ç¬”è®°ã€‚</sup></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'å¼ ä¸‰'</span>,</span><br><span class="line">  describe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'å§“åï¼š'</span> + <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.describe(); <span class="comment">// "å§“åï¼šå¼ ä¸‰"</span></span><br></pre></td></tr></table></figure>
<p>this.name æ˜¯åœ¨ describe ä¸­è°ƒç”¨ï¼Œè€Œ describe æ–¹æ³•æ‰€åœ¨çš„å½“å‰å¯¹è±¡æ˜¯ personï¼Œå› æ­¤ this.name å°±æ˜¯ person.nameã€‚</p>
<p>å¯¹è±¡çš„å±æ€§æ˜¯å¯ä»¥èµ‹å€¼ç»™å…¶ä»–å¯¹è±¡çš„ï¼Œæ‰€ä»¥å±æ€§æ‰€åœ¨çš„å½“å‰å¯¹è±¡æ˜¯å¯å˜çš„ï¼Œå³ this çš„æŒ‡å‘æ˜¯å¯å˜çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  name: <span class="string">'å¼ ä¸‰'</span>,</span><br><span class="line">  describe: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'å§“åï¼š'</span>+ <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> B = &#123;</span><br><span class="line">  name: <span class="string">'æå››'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">B.describe = A.describe;</span><br><span class="line">B.describe()</span><br><span class="line"><span class="comment">// "å§“åï¼šæå››"</span></span><br></pre></td></tr></table></figure>
<p>A.describe å±æ€§è¢«èµ‹å€¼ç»™äº† Bï¼Œäºæ˜¯ B.describe å°±è¡¨ç¤º describe æ–¹æ³•æ‰€åœ¨çš„å½“å‰å¯¹è±¡ Bï¼Œæ‰€æœ‰ this.name æŒ‡å‘çš„æ˜¯ B.name</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'å§“åï¼š'</span>+ <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  name: <span class="string">'å¼ ä¸‰'</span>,</span><br><span class="line">  describe: f</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> B = &#123;</span><br><span class="line">  name: <span class="string">'æå››'</span>,</span><br><span class="line">  describe: f</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A.describe() <span class="comment">// "å§“åï¼šå¼ ä¸‰"</span></span><br><span class="line">B.describe() <span class="comment">// "å§“åï¼šæå››"</span></span><br></pre></td></tr></table></figure>
<p>åªè¦å‡½æ•°èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œthis çš„æŒ‡å‘å°±ä¼šè¢«æ”¹å˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  name: <span class="string">'å¼ ä¸‰'</span>,</span><br><span class="line">  describe: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'å§“åï¼š'</span>+ <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'æå››'</span>;</span><br><span class="line"><span class="keyword">var</span> f = A.describe;</span><br><span class="line">f() <span class="comment">// "å§“åï¼šæå››"</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸ºä½•ä¼šå­˜åœ¨-this"><a href="#ä¸ºä½•ä¼šå­˜åœ¨-this" class="headerlink" title="ä¸ºä½•ä¼šå­˜åœ¨ this"></a>ä¸ºä½•ä¼šå­˜åœ¨ this</h3><p>JavaScript è¯­è¨€ä¹‹æ‰€ä»¥æœ‰ this çš„è®¾è®¡ï¼Œè·Ÿå†…å­˜é‡Œé¢çš„æ•°æ®ç»“æ„æœ‰å…³ç³»ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>: <span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å˜é‡ objã€‚JavaScript å¼•æ“ä¼šå…ˆåœ¨å†…å­˜é‡Œé¢ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ <code>{foo:5}</code> ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€èµ‹å€¼ç»™ objã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡ obj æ˜¯ä¸€ä¸ªåœ°å€ï¼Œä¸€ä¸ªå¼•ç”¨ã€‚åé¢å¦‚æœè¦è¯»å– <code>obj.foo</code>ï¼Œå¼•æ“å…ˆä» obj æ‹¿åˆ° å†…å­˜åœ°å€ï¼Œç„¶åå†ä»è¯¥åœ°å€è¯»å‡ºåŸå§‹çš„å¯¹è±¡ï¼Œè¿”å›å®ƒçš„ foo å±æ€§ã€‚</p>
<p>åŸå§‹çš„å¯¹è±¡ä»¥å­—å…¸ç»“æ„ä¿å­˜ï¼Œæ¯ä¸€ä¸ªå±æ€§åéƒ½å¯¹åº”ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸Šé¢ä¾‹å­çš„ foo å±æ€§ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸‹é¢çš„å½¢å¼ä¿å­˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  foo: &#123;</span><br><span class="line">    [[value]]: <span class="number">5</span>,</span><br><span class="line">    [[writable]]: <span class="literal">true</span>,</span><br><span class="line">    [[enumberable]]: <span class="literal">true</span>,</span><br><span class="line">    [[configurable]]: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>foo å±æ€§çš„å€¼ä¿å­˜åœ¨å±æ€§æè¿°å¯¹è±¡çš„ value å±æ€§é‡Œé¢ã€‚</p>
<p>å¦‚æœå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°äº†ï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">foo</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå¼•æ“ä¼šå°†å‡½æ•°å•ç‹¬ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç„¶åå°†å‡½æ•°çš„å†…å­˜åœ°å€èµ‹å€¼ç»™ foo å±æ€§çš„ value å±æ€§ã€‚</p>
<p>å‡½æ•°å¯ä»¥åœ¨ä¸åŒçš„è¿è¡Œç¯å¢ƒä¸­æ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨å‡½æ•°ä½“å†…éƒ¨è·å¾—å½“å‰çš„è¿è¡Œç¯å¢ƒ contextã€‚æ‰€ä»¥ this å°±å‡ºç°äº†ï¼Œå®ƒçš„è®¾è®¡ç›®çš„å°±æ˜¯åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼ŒæŒ‡ä»£å‡½æ•°å½“å‰çš„è¿è¡Œç¯å¢ƒã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  f: f,</span><br><span class="line">  x: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">f() <span class="comment">// 1</span></span><br><span class="line">obj.f() <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ¤” é‚£å’Œ python çš„ self ä¸€æ ·å—ï¼Ÿ <a href="https://docs.python.org/3/tutorial/classes.html" target="_blank" rel="noopener">Classes</a><br>self å‡ºç°åœ¨ class ä¸­ã€‚ä¸€èˆ¬ class æ‰€æœ‰çš„å®ä¾‹æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½å‘½åä¸º selfï¼Œå¹¶æŒ‡å‘å®ä¾‹åŒ–å class çš„å®ä¾‹ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨åœºåˆ"><a href="#ä½¿ç”¨åœºåˆ" class="headerlink" title="ä½¿ç”¨åœºåˆ"></a>ä½¿ç”¨åœºåˆ</h3><ol>
<li><p>æŒ‡ä»£å…¨å±€ç¯å¢ƒ</p>
</li>
<li><p>æ„é€ å‡½æ•°å†…éƒ¨ï¼ŒæŒ‡ä»£å®ä¾‹åŒ–çš„å¯¹è±¡</p>
</li>
<li><p>å¯¹è±¡çš„æ–¹æ³•å†…çš„ this æŒ‡ä»£è¿™ä¸ªå¯¹è±¡<br>ä½†æ˜¯ï¼Œä¸‹é¢å‡ ç§ç”¨æ³•ï¼Œä¼šæ”¹å˜ this çš„æŒ‡å‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(obj.foo = obj.foo)() <span class="comment">// window</span></span><br><span class="line">(<span class="literal">false</span> || obj.foo)() <span class="comment">// window</span></span><br><span class="line">(<span class="number">1</span>, obj.foo)() <span class="comment">// window</span></span><br></pre></td></tr></table></figure>
<p>obj.foo å°±æ˜¯ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªå€¼çœŸæ­£è°ƒç”¨çš„æ—¶å€™ï¼Œè¿è¡Œç¯å¢ƒå·²ç»ä¸æ˜¯ obj äº†ï¼Œè€Œæ˜¯å…¨å±€ç¯å¢ƒï¼Œæ‰€ä»¥ this ä¸å†æŒ‡å‘ objã€‚</p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼ŒJavaScript å¼•æ“å†…éƒ¨ï¼Œobj å’Œ obj.foo å‚¨å­˜åœ¨ä¸¤ä¸ªå†…å­˜åœ°å€ï¼Œç§°ä¸ºåœ°å€ä¸€å’Œåœ°å€è€Œã€‚<code>obj.foo()</code> è¿™æ ·è°ƒç”¨æ—¶ï¼Œæ˜¯ä»åœ°å€ä¸€è°ƒç”¨åœ°å€äºŒï¼Œå› æ­¤åœ°å€äºŒçš„è¿è¡Œç¯å¢ƒæ˜¯åœ°å€ä¸€ï¼Œthis æŒ‡å‘ objã€‚ä½†æ˜¯ï¼Œä¸Šé¢ä¸‰ç§æƒ…å†µï¼Œéƒ½æ˜¯ç›´æ¥å»é™¤åœ°å€äºŒè¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œè¿è¡Œç¯å¢ƒå°±æ˜¯å…¨å±€ç¯å¢ƒï¼Œå› æ­¤ this æŒ‡å‘å…¨å±€ç¯å¢ƒã€‚</p>
</li>
</ol>
<p>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¿®æ”¹å¯¹è±¡çš„æ–¹æ³•å†…çš„ this æŒ‡å‘ï¼Œä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> couner = &#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line">counter.inc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  <span class="keyword">this</span>.count++</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f = counter.inc;</span><br><span class="line">f();</span><br><span class="line"><span class="comment">// TypeError: Cannot read property 'count' of undefined</span></span><br></pre></td></tr></table></figure>
<h3 id="ç»‘å®š-this-çš„æ–¹æ³•"><a href="#ç»‘å®š-this-çš„æ–¹æ³•" class="headerlink" title="ç»‘å®š this çš„æ–¹æ³•"></a>ç»‘å®š this çš„æ–¹æ³•</h3><h4 id="Function-prototype-call"><a href="#Function-prototype-call" class="headerlink" title="Function.prototype.call()"></a>Function.prototype.call()</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">func.call(thisValue, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>
<p>call æ–¹æ³•çš„ä¸€ä¸ªåº”ç”¨æ˜¯è°ƒç”¨å¯¹è±¡çš„åŸç”Ÿæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.hasOwnProperty(<span class="string">'toString'</span>); </span><br><span class="line">obj.hasOwnProperty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">obj.hasOwnProperty(<span class="string">'toString'</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, <span class="string">'toString'</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h4 id="Function-prototype-apply"><a href="#Function-prototype-apply" class="headerlink" title="Function.prototype.apply()"></a>Function.prototype.apply()</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">func.apply(thisValue, [arg1, arg2, ...])</span><br></pre></td></tr></table></figure>
<p>call æ–¹æ³•ä¸­åŸå‡½æ•°çš„å‚æ•°éœ€è¦ä¸€ä¸ªä¸€ä¸ªæ·»åŠ ï¼Œapply ä¸­ç±»æ•°ç»„å½¢å¼ä¼ å…¥ã€‚</p>
<h5 id="æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ "><a href="#æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ " class="headerlink" title="æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ "></a>æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ </h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">10</span>, <span class="number">2</span>,<span class="number">4</span>,<span class="number">15</span>,<span class="number">9</span>]</span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, a) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<h5 id="å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜ä¸º-undefined"><a href="#å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜ä¸º-undefined" class="headerlink" title="å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜ä¸º undefined"></a>å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜ä¸º undefined</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.apply(<span class="literal">null</span>, [<span class="string">'a'</span>,,<span class="string">'b'</span>]) <span class="comment">// ['a', undefined, 'b']</span></span><br></pre></td></tr></table></figure>
<p>åŸç†æ˜¯ï¼Œåœ¨ apply çš„ç¬¬äºŒä¸ªå‚æ•°æ¥å—çš„æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œè°ƒç”¨çš„æ˜¯å†…ç½®æ–¹æ³• CreateListFromArrayLike æ–¹æ³• <code>CreateListFromArrayLike(obj[, elementTypes])</code> å¦‚æœæ²¡æœ‰å®šä¹‰ elementTypes æ—¶ï¼Œä¼šè¢«è®¤å®šä¸º Undefinedã€Nullã€Booleanã€Stringã€Symbolã€Numberã€Objectã€‚åœ¨ç”Ÿæˆ list æ—¶ï¼Œè°ƒç”¨ <code>Get(obj, indexName)</code>ã€‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­è¿”å›çš„æ˜¯ elementTypes é‡Œé¢çš„ undefined äº†ã€‚<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-createlistfromarraylike" target="_blank" rel="noopener">CreateListFromArrayLike</a><br>ç„¶å ç©ºå…ƒç´ ä¸ undefined å·®åˆ«æ˜¯ï¼Œæ•°ç»„çš„ forEach æ–¹æ³•ä¼šè·³è¿‡ç©ºå…ƒç´ ï¼Œä½†æ˜¯ä¸ä¼šè·³è¿‡ undefinedã€‚</p>
<h5 id="è½¬æ¢ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"><a href="#è½¬æ¢ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡" class="headerlink" title="è½¬æ¢ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"></a>è½¬æ¢ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.slice.apply(&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="attr">length</span>: <span class="number">1</span>&#125;) <span class="comment">// [1]</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.apply(&#123;<span class="number">0</span>: <span class="number">1</span>&#125;) <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.apply(&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="attr">length</span>: <span class="number">2</span>&#125;) <span class="comment">// [1, undefined]</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.apply(&#123;<span class="attr">length</span>: <span class="number">1</span>&#125;) <span class="comment">// [undefined]</span></span><br></pre></td></tr></table></figure>
<h5 id="ç»‘å®šå›è°ƒå‡½æ•°çš„å¯¹è±¡"><a href="#ç»‘å®šå›è°ƒå‡½æ•°çš„å¯¹è±¡" class="headerlink" title="ç»‘å®šå›è°ƒå‡½æ•°çš„å¯¹è±¡"></a>ç»‘å®šå›è°ƒå‡½æ•°çš„å¯¹è±¡</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line">o.f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> === o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  o.f.apply(o);</span><br><span class="line">  <span class="comment">// æˆ–è€… o.f.call(o);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jQuery çš„å†™æ³•</span></span><br><span class="line">$(<span class="string">'#button'</span>).on(<span class="string">'click'</span>, f);</span><br></pre></td></tr></table></figure>
<p>ç‚¹å‡»æŒ‰é’®ä»¥åï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºä¸º trueã€‚ç”±äº apply æ–¹æ³•ï¼ˆæˆ–è€… call æ–¹æ³•ï¼‰ä¸ä»…ç»‘å®šå‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨å¯¹è±¡ï¼Œè¿˜ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå› æ­¤ä¸å¾—ä¸æŠŠç»‘å®šè¯­å¥å†™åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…ï¼Œæ›´ç®€æ´çš„å†™æ³•æ˜¯é‡‡ç”¨ä¸‹é¢ä»‹ç»çš„ bind æ–¹æ³•ã€‚</p>
<h4 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind()"></a>Function.prototype.bind()</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">d.getTime()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> print = d.getTime()</span><br><span class="line">print() <span class="comment">// Error....</span></span><br></pre></td></tr></table></figure>
<p>æ”¹ç”¨ bind æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> print = d.getTime.bind(d)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * <span class="keyword">this</span>.m + y * <span class="keyword">this</span>.n</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  m: <span class="number">2</span>,</span><br><span class="line">  n: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> newAdd = add.bind(obj, <span class="number">5</span>)</span><br><span class="line">newAdd(<span class="number">5</span>) <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œbind æ–¹æ³•é™¤äº†ç»‘å®š this å¯¹è±¡ï¼Œè¿˜å°† add å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° x ç»‘å®šæˆ 5ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°å‡½æ•° newAddï¼Œè¿™ä¸ªå‡½æ•°åªè¦å†æ¥å—ä¸€ä¸ªå‚æ•° y å°±èƒ½è¿è¡Œäº†ã€‚</p>
<p>å¦‚æœ bind æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ null æˆ– undefinedï¼Œç­‰äºå°† this ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼Œå‡½æ•°è¿è¡Œæ—¶ this æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸º windowï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> plus5 = add.bind(<span class="literal">null</span>, <span class="number">5</span>)</span><br><span class="line">plus5(<span class="number">10</span>) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<p>bind æ–¹æ³•æ¯æ¬¡è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡æ·»åŠ ç›‘å¬å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå¥½åœ¨æ¥ä¸‹æ¥çš„æ—¶å€™å–æ¶ˆç›‘å¬ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> listener = o.m.bind(o)</span><br><span class="line">element.addEventListener(<span class="string">'click'</span>, listener)</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">element.removeEventListener(<span class="string">'click'</span>, listener)</span><br></pre></td></tr></table></figure>
<p>å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'å¼ ä¸‰'</span>,</span><br><span class="line">  times: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  print: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.times.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.print()</span><br><span class="line"><span class="comment">// æ²¡æœ‰ä»»ä½•è¾“å‡º</span></span><br><span class="line">obj.print = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.times.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.print()</span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br></pre></td></tr></table></figure>
<p>ä¸ call ä¸€èµ·ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> slice = <span class="built_in">Function</span>.prototype.call.bind(</span><br><span class="line">  <span class="built_in">Array</span>.prototype.slice);</span><br><span class="line">slice([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="number">0</span>, <span class="number">1</span>) <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç çš„å«ä¹‰å°±æ˜¯ï¼Œå°† Array.prototype.slice å˜æˆ Function.prototype.call æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ï¼Œè°ƒç”¨æ—¶å°±å˜æˆäº† Array.prototype.slice.callã€‚ç±»ä¼¼çš„å†™æ³•è¿˜å¯ç”¨äºå…¶ä»–æ•°ç»„æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> push = <span class="built_in">Function</span>.prototype.call.bind(</span><br><span class="line">  <span class="built_in">Array</span>.prototype.push);</span><br><span class="line"><span class="keyword">var</span> pop = <span class="built_in">Function</span>.prototype.call.bind(</span><br><span class="line">  <span class="built_in">Array</span>.prototype.pop);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span> ,<span class="number">2</span> ,<span class="number">3</span>];</span><br><span class="line">push(a, <span class="number">4</span>)</span><br><span class="line">a <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">pop(a)</span><br><span class="line">a <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå†è¿›ä¸€æ­¥ï¼Œå°† Function.prototype.call æ–¹æ³•ç»‘å®šåˆ° Function.prototype.bind å¯¹è±¡ï¼Œå°±æ„å‘³ç€ bind çš„è°ƒç”¨å½¢å¼ä¹Ÿå¯ä»¥è¢«æ”¹å†™ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">v</span>: <span class="number">123</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> bind = <span class="built_in">Function</span>.prototype.call.bind(</span><br><span class="line">  <span class="built_in">Function</span>.prototype.bind);</span><br><span class="line">bind(f, o)() <span class="comment">// 123</span></span><br></pre></td></tr></table></figure>

  </div>
  
</article>


  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/bjb/page/16/">&laquo;ä¸Šä¸€é¡µ</a><a class="page-number" href="/bjb/">1</a><span class="space">&hellip;</span><a class="page-number" href="/bjb/page/15/">15</a><a class="page-number" href="/bjb/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/bjb/page/18/">18</a><a class="page-number" href="/bjb/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/bjb/page/70/">70</a><a class="extend next" rel="next" href="/bjb/page/18/">ä¸‹ä¸€é¡µ&raquo;</a>
  </nav>

    </main>
    <footer>
  <p>&copy; 2019 xcp0326</p>
</footer>
  </body>
</html>
