<!Doctype html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>FE NOTEBOOK 🚀</title>
  
    <link rel="icon" href="/images/favico.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/style/gitalk.css">
  <link rel="stylesheet" href="/style/style.css">
  <script src="/js/gitalk.min.js"></script>
</head>
  <body>
    <header class="header">
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">首页</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">归档</a>
        </li>
      
    </ul>
  </nav>
  <h1 class="pc">FE NOTEBOOK 🚀</h1>
  <h1 class="mobile"><a href="/">FE NOTEBOOK 🚀</a></h1>
  <em>「 学海无涯，没空撩妹！」</em>
</header>
    <main class="main">
      
  <article class="post">
  <div class="post-title">
    <h2 class="title">字符串</h2>
  </div>
  <div class="post-meta">
    <span class="post-time">2018-11-20 16:20:17</span>
    <span class="post-tags">
      
    </span>
    
  </div>
  <div class="post-content">
    <blockquote>
<p><sup>这里是我读<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">《阮一峰 JavaScript 教程》</a>做的笔记。</sup></p>
</blockquote>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><h3 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h3><p>单引号或者双引号中的 0 个或者多个字符就是字符串</p>
<p>单引号里面再用单引号需要用反斜杆转义，或者将其中一对引号改成双引号</p>
<p>双引号里面再用双引号需要用反斜杆转义，或者将其中一对引号改成单引号</p>
<p>单双引号引号包含的字符串默认是单行，要分成多行，需要在行尾加反斜杆，否则会报错，</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> errorStr = <span class="string">'</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c'</span></span><br><span class="line"><span class="comment">// SyntaxError: Unexpected token ILLEGAL</span></span><br></pre></td></tr></table></figure>
<p>加了反斜杠以后，原来写在一行的字符串，可以分成多行书写。但是，输出的时候还是单行，效果与写在同一行完全一样。注意，反斜杠的后面必须是换行符，而不能有其他字符（比如空格），否则会报错。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'</span></span><br><span class="line"><span class="string">a \</span></span><br><span class="line"><span class="string">b \</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">str <span class="comment">// 'abc'</span></span><br></pre></td></tr></table></figure>
<p>可以用 + 连接多个单行字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'a'</span></span><br><span class="line">+ <span class="string">'b'</span></span><br><span class="line">+ <span class="string">'c'</span></span><br><span class="line">str <span class="comment">// 'abc'</span></span><br></pre></td></tr></table></figure>
<p>输出多行字符串，奇淫怪技啊.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/*</span></span><br><span class="line"><span class="comment">line 1</span></span><br><span class="line"><span class="comment">line 2</span></span><br><span class="line"><span class="comment">line 3</span></span><br><span class="line"><span class="comment">*/</span>&#125;).toString().split(<span class="string">'\n'</span>).slice(<span class="number">1</span>, <span class="number">-1</span>).join(<span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<p>或者用 ES 6 的模版字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">`a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c`</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-转义"><a href="#1-2-转义" class="headerlink" title="1.2 转义"></a>1.2 转义</h3><ul>
<li><code>\0</code> null <code>\u0000</code></li>
<li><code>\b</code> 后退键 <code>\u0008</code></li>
<li><code>\f</code> 换页符 <code>\u000C</code></li>
<li><code>\n</code> 换行符  <code>\u000A</code></li>
<li><code>\r</code> 回车符 <code>\u000D</code></li>
<li><code>\t</code> 制表符  <code>\u0009</code></li>
<li><code>\v</code> 垂直制表符 <code>\u000B</code></li>
<li><code>\&#39;</code> 单引号 <code>\u0027</code></li>
<li><code>\&quot;</code> 双引号 <code>\u0022</code></li>
<li><code>\\</code> 反斜杆  <code>\u005C</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1\t2'</span>) <span class="comment">// 1	2</span></span><br></pre></td></tr></table></figure>
<p>反斜杆后跟 3 个八进制数，代表一个字符。八进制数对应该字符的 Unicode 码点，比如 <code>\251</code> 表示版权符号。这种方法只能输出 265 种字符</p>
<p>反斜杆后跟 x 再接着 2 个十六进制数，也代表一个字符。十六进制数对应的是这个字符的 Unicode 码点，比如 <code>\xA9</code> 表示版权符号。这种也只能显示 256 种字符。</p>
<p>反斜杆后跟 u 再接着 4 个十六进制数，代表一个字符。十六进制是对应的这个字符的 Unicode 码点，比如 <code>\u00A9</code> 表示版权符号。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'\251'</span> <span class="comment">// "©"</span></span><br><span class="line"><span class="string">'\xA9'</span> <span class="comment">// "©"</span></span><br><span class="line"><span class="string">'\u00A9'</span> <span class="comment">// "©"</span></span><br></pre></td></tr></table></figure>
<p>正常字符前面使用反斜杆，反斜杆会被忽略。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'\a'</span> <span class="comment">// "a"</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-字符串与数组"><a href="#1-3-字符串与数组" class="headerlink" title="1.3 字符串与数组"></a>1.3 字符串与数组</h3><p>字符串可以视为字符串数组，可以且只可以像数组一样读取字符串数组里面值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="string">'12345'</span></span><br><span class="line">a.length <span class="comment">// 5</span></span><br><span class="line">a[<span class="number">0</span>] <span class="comment">// 1</span></span><br><span class="line">a[<span class="number">8</span>] <span class="comment">// undefined</span></span><br><span class="line">a[<span class="string">'x'</span>] <span class="comment">// undefined</span></span><br><span class="line">a[<span class="number">-1</span>] <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h2 id="2-字符集"><a href="#2-字符集" class="headerlink" title="2. 字符集"></a>2. 字符集</h2><p>JavaScript 使用 Unicode 字符集。JavaScript 引擎内部，所有字符都用的 Unicode 表示。</p>
<p>JavaScript 不仅可以用 Unicode 存储字符，还可以只用在程序中 Unicode 码点表示字符，比如 <code>\u00A9</code> 代表版权符号。</p>
<p>解析代码时，JavaScript 会自动识别一个字符时字面量还是 Unicode，输出字面量给用户</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f\u006F\u006F = <span class="string">'abc'</span></span><br><span class="line">foo <span class="comment">// 'abc'</span></span><br></pre></td></tr></table></figure>
<p>每个字符在 JavaScript 内部都是以 16 位（即 2 个字节）的 UTF-16 格式存储的。也就是说 JavaScript 的单位字符长度固定为 16 位长度，即 2 个字节。</p>
<p>UTF-16 有两种长度：</p>
<ul>
<li>对于码点在 U+0000 到 U+FFFF 之间的字符，长度为 16 位，即 2 个字节</li>
<li>对于码点在 U+10000 到 U+10FFFF 之间的字符，长度为 32 位，即 4 个字节，而且前两个字节在 0xD800 到 0xDBFF 之间，后两个字节在 0xDC00 到 0xDFFF 之间。码点 U+1D306 对应的字符为<code>𝌆</code>，它的 UTF-16 字符是 0xD834 0xDF06</li>
</ul>
<p>JavaScript 对 UTF-16 的支持是不完整的，由于历史原因，只支持两字节的字符，不支持四字节的字符。这是因为 JavaScript 第一版发布的时候，Unicode 的码点只编到 U+FFFF，因此两字符足够表示了。后来，Unicode 纳入的字符越来越多，出现了四字节的编码。但是，JavaScript 的标准此时已经定型了，统一将字符长度限制在两字节，导致无法识别四字节的字符。<code>𝌆</code>浏览器会正确识别为一个字符，而 JavaScript 却无法识别，会认为这是两个字符。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">'𝌆'</span>.length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>总结一下，对于码点在 U+10000 到 U+10FFFF 之间的字符，JavaScript 总是认为它们是两个字符。处理的时候，必须考虑到这一点，也就是说 JavaScript 返回的字符串的长度可能是不对的。</p>
<h2 id="3-Base64-转码"><a href="#3-Base64-转码" class="headerlink" title="3. Base64 转码"></a>3. Base64 转码</h2><p>有时，文本里面包含一些不可打印的符号，比如 ASCII 码 0 到 31 的符号都无法打印出来，这时可以使用 Base64 编码将它们转成可以打印的字符。另一个场景时，有时候需要以文本格式传递二进制数据，那么也可以使用 Base64 编码。</p>
<p>所谓 Base64 编码就是一种编码方法，可以将任意值转成 0～9、A～Z、a～z、+ 和 / 这 64 个字符组成的可打印字符。使用它的主要目的不是为了加密，而是为了不出现特殊字符，简化程序的处理。</p>
<p>JavaScript 原生提供的 Base64 的两个方法：</p>
<ul>
<li>btoa 任意值转为 Base64 编码</li>
<li>atob Base64 编码转为原来的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'hahaha'</span></span><br><span class="line">base64Str = btoa(str) <span class="comment">// "aGFoYWhh"</span></span><br><span class="line">atob(base64Str) <span class="comment">// "hahaha"</span></span><br></pre></td></tr></table></figure>
<p>这两个方法不适合非 ASCII 码的字符，会报错</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btoa(<span class="string">'胖达'</span>) <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>
<p>要将非 ASCII 码字符转为 Base64 编码，必须中间加一个转码环节，再使用这两个方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> base64encode = <span class="function"><span class="params">str</span> =&gt;</span> btoa(<span class="built_in">encodeURIComponent</span>(str))</span><br><span class="line"><span class="keyword">const</span> base64Decode = <span class="function"><span class="params">str</span> =&gt;</span> <span class="built_in">decodeURIComponent</span>(atob(str))</span><br><span class="line">base64encode(<span class="string">'胖达'</span>) <span class="comment">// "JUU4JTgzJTk2JUU4JUJFJUJF"</span></span><br><span class="line">base64Decode(<span class="string">'JUU4JTgzJTk2JUU4JUJFJUJF'</span>) <span class="comment">// 胖达</span></span><br></pre></td></tr></table></figure>

  </div>
  
</article>


  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/page/80/">&laquo;上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/79/">79</a><a class="page-number" href="/page/80/">80</a><span class="page-number current">81</span><a class="page-number" href="/page/82/">82</a><a class="page-number" href="/page/83/">83</a><span class="space">&hellip;</span><a class="page-number" href="/page/114/">114</a><a class="extend next" rel="next" href="/page/82/">下一页&raquo;</a>
  </nav>

    </main>
    <footer>
  <p>&copy; 2019 code.dsphoebe.com <wbr> <a href="http://www.miitbeian.gov.cn/">京ICP备15048606号-1</a></p>
</footer>
  </body>
</html>
